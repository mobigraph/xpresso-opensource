!function(){"use strict";angular.module("xpresso",["ui.router","ngDialog","ngTouch","ngAnimate","templates"]).config(["$animateProvider",function(n){n.classNameFilter(/(ngIncludeItem|autoSuggestList)/)}])}();
!function(){"use strict";function e(e,r,l){e.state("gender",{url:"/",templateUrl:"app/modules/gender-selection/gender-selection.html",controller:"GenderController as genderController"}).state("avDesign",{url:"/avDesign",templateUrl:"app/modules/avDesign/avDesign.html",controller:"AVDesignController as avDesignController"}),r.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider","$windowProvider"],angular.module("xpresso").config(e)}();
!function(){"use strict";function e(e,n,r,i){}e.$inject=["$state","GlobalService","GenderService","AvatarDesignService"],angular.module("xpresso").run(e)}();
var bridge={};bridge.loadBridge=function(){},bridge.isiOSPlatform=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.shareXpressoFB=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.save_gender=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.save_avatar_byte_code=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.save_avatar=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.save_default_job_id=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.invite=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.fbLike=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.sendLocale=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.share=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.superHero=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.get_token_async=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.get_uuid_async=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.get_reinit_params=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.show_progress=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.dismiss_progress=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.loadOnError=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.sayHello=function(e,i){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.changeTheme=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.closeApp=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.showKeypad=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.hideKeypad=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.isMobile=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.launchAccessibility=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.getAccessibilityState=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.setReferrerState=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.setAccessibilityState=function(e){var i=bridgeInterFace.getInstance();i.setAccessibilityState(e)},bridge.onInputClicked=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.setKeyboardState=function(e){var i=bridgeInterFace.getInstance();i.setKeyboardState(e)},bridge.calliOSFunction=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.openCustomURLinIFrame=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.showToast=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.getLaunchedApp=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.get_app_version=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.launchFb=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.launchPlayStore=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.inviteToXpresso=function(e,i){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.inviteFriendAvatar=function(e,i){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.getPopupState=function(e){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.onJWTTokenExpired=function(){DebugUtils.bridge()&&console.log("Native call ignored")},bridge.get_token=function(e){try{var i=bridgeInterFace.getInstance();i.get_token(e)}catch(o){console.log("Native call ignored")}},bridge.set_uuid=function(e){try{var i=bridgeInterFace.getInstance();i.set_uuid(e)}catch(o){console.log("Native call ignored")}},bridge.set_reinit_params=function(e,i,o,n,t,g){try{var r=bridgeInterFace.getInstance();r.set_reinit_params(e,i,o,n,t,g)}catch(l){console.log("Native call ignored")}},bridge.reLoadPage=function(e){try{var i=bridgeInterFace.getInstance();i.reLoadPage(e)}catch(o){console.log("Native call ignored")}},bridge.setLaunchedApp=function(e){try{var i=bridgeInterFace.getInstance();i.setLaunchedApp(e)}catch(o){console.log("Native call ignored")}},bridge.setLocale=function(e){try{var i=bridgeInterFace.getInstance();i.setLocale(e)}catch(o){console.log("Native call ignored")}},bridge.setAppVersion=function(e){try{var i=bridgeInterFace.getInstance();i.setAppVersion(e)}catch(o){console.log("Native call ignored")}},bridge.dismissPopup=function(){try{var e=bridgeInterFace.getInstance();e.dismissPopup()}catch(i){console.log("Native call ignored")}},bridge.onGOClicked=function(){try{var e=bridgeInterFace.getInstance();e.onGOClicked()}catch(i){console.log("Native call ignored")}},this.show_video=function(){var e={method:"show_video"};iOS()?window.webkit.messageHandlers.observe.postMessage(e):prompt("bridge_key",JSON.stringify(e))},this.show_InterstitialAd=function(){var e={method:"show_InterstitialAd"};iOS()?window.webkit.messageHandlers.observe.postMessage(e):prompt("bridge_key",JSON.stringify(e))},this.show_top_banner=function(){var e={method:"show_top_banner"};iOS()?window.webkit.messageHandlers.observe.postMessage(e):prompt("bridge_key",JSON.stringify(e))},this.hide_top_banner=function(){var e={method:"hide_top_banner"};iOS()?window.webkit.messageHandlers.observe.postMessage(e):prompt("bridge_key",JSON.stringify(e))},this.show_bottom_banner=function(){var e={method:"show_bottom_banner"};iOS()?window.webkit.messageHandlers.observe.postMessage(e):prompt("bridge_key",JSON.stringify(e))},this.hide_bottom_banner=function(){var e={method:"hide_bottom_banner"};iOS()?window.webkit.messageHandlers.observe.postMessage(e):prompt("bridge_key",JSON.stringify(e))},bridge.backPressed=function(){try{var e=bridgeInterFace.getInstance();e.backPressed()}catch(i){console.log("Native call ignored")}};
var bridgeDummy=function(){this.isiOSPlatform=function(){},this.shareXpressoFB=function(t){},this.save_gender=function(t){},this.save_avatar_byte_code=function(t){},this.save_avatar=function(t){},this.save_default_job_id=function(t){},this.superHero=function(){},this.invite=function(){},this.fbLike=function(){},this.sendLocale=function(){},this.share=function(t){},this.get_token_async=function(){},this.get_uuid_async=function(){},this.get_token=function(t){},this.set_uuid=function(t){},this.onJWTTokenExpired=function(){},this.set_reinit_params=function(t,i,n,s,o,e){},this.reLoadPage=function(t){},this.get_reinit_params=function(){},this.show_progress=function(t){},this.dismiss_progress=function(){},this.loadOnError=function(){},this.sayHello=function(t,i){},this.changeTheme=function(t){},this.showToast=function(t){},this.setLaunchedApp=function(t){},this.getLaunchedApp=function(){},this.setLocale=function(t){},this.setAppVersion=function(t){},this.get_app_version=function(){},this.launchFb=function(){},this.launchPlayStore=function(){},this.getPopupState=function(t){},this.dismissPopup=function(){},this.onGOClicked=function(){},this.backPressed=function(){},this.closeApp=function(t){},this.showKeypad=function(){},this.hideKeypad=function(){},this.isMobile=function(){},this.launchAccessibility=function(t){},this.getAccessibilityState=function(){},this.setAccessibilityState=function(t){},this.onInputClicked=function(){},this.setKeyboardState=function(t){},this.calliOSFunction=function(t){},this.openCustomURLinIFrame=function(t){}};
var bridgeInterFace=function(){function e(){return appInterface.getFocussedApp.BridgeEnabledAPPS()}function n(){return bridge.loadBridge(),bridge.isiOSPlatform(),r=e()?new webViewBridge:new bridgeDummy}var r;return{getInstance:function(){return null!=r?r:r=new n}}}();
var DebugUtils={},globalDebug=!0;"web-prod.xpresso.me"==location.hostname&&(globalDebug=!1),DebugUtils.isKikaDebugEnabled=function(){return 0==globalDebug?!1:!0},DebugUtils.genderSelection=function(){return 0==globalDebug?!1:!0},DebugUtils.isavDesignDebugEnabled=function(){return 0==globalDebug?!1:!0},DebugUtils.isGroupHomeDebugEnabled=function(){return 0==globalDebug?!1:!0},DebugUtils.animHome=function(){return 0==globalDebug?!1:!0},DebugUtils.analyticsService=function(){return 0==globalDebug?!1:!0},DebugUtils.bridge=function(){return 0==globalDebug?!1:!0},DebugUtils.isHttpClientDebugEnabled=function(){return 0==globalDebug?!1:!0},DebugUtils.isSearchHomeDebugEnabled=function(){return 0==globalDebug?!1:!0};
"web-prod.xpresso.me"==location.hostname?!function(e,t,a,n,o,s,c){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,s=t.createElement(a),c=t.getElementsByTagName(a)[0],s.async=1,s.src=n,c.parentNode.insertBefore(s,c)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"):!function(e,t,a,n,o,s,c){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,s=t.createElement(a),c=t.getElementsByTagName(a)[0],s.async=1,s.src=n,c.parentNode.insertBefore(s,c)}(window,document,"script","https://www.google-analytics.com/analytics_debug.js","ga");var UUID=localStorage.getItem("UUID"),trackingID="UA-85783554-1";"Xpressoforwhatsapp"==localStorage.getItem("App")&&(trackingID="UA-101442728-1"),"undefined"!=UUID&&void 0!=UUID&&null!=UUID&&"null"!=UUID&&"null"!=UUID&&"(null)"!=UUID&&" "!=UUID&&" "!=UUID&&(ga("create",{trackingId:trackingID,cookieDomain:"auto",userId:UUID}),"web-prod.xpresso.me"!=location.hostname&&ga("set","sendHitTask",null),ga("send",{hitType:"pageview"}));var analyticsFunc={};analyticsFunc.setTracker=function(e){ga("create",{trackingId:trackingID,cookieDomain:"auto",userId:e}),"web-prod.xpresso.me"!=location.hostname&&ga("set","sendHitTask",null),ga("send",{hitType:"pageview"})};
function webViewConstants(){return{src:"src",token:"token",uuid:"uuid",version:"version",bytecode:"avatar_byte_code",ava_json:"avatar_json",isreferrer:"isreferrer",pushGroupID:"pushGroupID"}}function botConstants(){return{src:"src",token:"token",action:"action",currentCutomization:"currentavatar"}}var appInterface={};appInterface.enableAPP=function(){return{WEBVIEW:!0,BOTS:!1,BROWSER:!1,KEYPAD_IMSGR:!1,KEYPAD_KIKA:!1}},appInterface.getFocussedApp={WebView:function(){return appInterface.enableAPP().WEBVIEW},BOT:function(){return appInterface.enableAPP().BOTS},Browser:function(){return appInterface.enableAPP().BROWSER},Keypad_Imsgr:function(){return appInterface.enableAPP().KEYPAD_IMSGR},Keypad_Kika:function(){return appInterface.enableAPP().KEYPAD_KIKA},BridgeEnabledAPPS:function(){return appInterface.getFocussedApp.WebView()||appInterface.getFocussedApp.Keypad_Imsgr()}},appInterface.getAppConstants=function(){return 1==appInterface.getFocussedApp.WebView()?webViewConstants():1==appInterface.getFocussedApp.BOTS()?botConstants():void 0},appInterface.getUrlParameters=function(){var e={};return appInterface.checkValue(location.search)?appInterface.checkValue(location.hash)||location.hash.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,r,t){e[r]=t}):location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,r,t){e[r]=t}),e},appInterface.getUrlParameter=function(e){var a={};return appInterface.checkValue(location.search)?void(appInterface.checkValue(location.hash)||location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,r,t){a[r]=t})):(location.hash.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,r,t){a[r]=t}),e?a[e]:a)},appInterface.checkValue=function(e){return"undefined"==e||void 0==e||null==e||"null"==e||"null"==e||"(null)"==e||" "==e||" "==e||""==e||"XX"==e?!0:!1},appInterface.print_call_stack=function(){},appInterface.checkval=function(e,a){"appversion"==e&&appInterface.print_call_stack(),(appInterface.checkValue(localStorage.getItem(e))||"App"==e||"OAuthToken"==e||"appversion"==e||"gender"==e)&&(console.log("gender",e),appInterface.checkValue(a)||(console.log("gender",e),localStorage.setItem(e,a)))},appInterface.storeBaseParamsLocal=function(e){appInterface.checkval("App",e.src),appInterface.checkval("OAuthToken",e.token)},appInterface.getVersion=function(e){if(!appInterface.checkValue(e)){e=e.replace("android:",""),e=e.replace(/\./g,"");var a=parseInt(e);return a}},appInterface.isAppUpdated=function(e,a){if(1==appInterface.Mobile().Android()){var r=appInterface.getVersion(e),t=appInterface.getVersion(a);if(!appInterface.checkValue(r)&&!appInterface.checkValue(t)&&t>r&&1018==t)return!0}},appInterface.storeWebViewParamsLocal=function(e){if(console.log("storeWebViewParamsLocal"),!appInterface.checkValue(e)){if(appInterface.storeBaseParamsLocal(e),appInterface.checkval("UUID",e.uuid),appInterface.isAppUpdated(localStorage.getItem("appversion"),e.version)&&appPayment.setUserInfo(e),appInterface.checkval("appversion",e.version),appInterface.checkval("bytecode",e.bytecode),appInterface.checkval("defaultJobToken",e.defaulttoken),appInterface.checkval("Locale",e.countrycode),appInterface.checkval("isreferrer",e.isreferrer),void 0!=e.avatar){var a=e.avatar,r=atob(a);appInterface.checkval("avatar",r)}appInterface.checkval("gender",e.gender),appInterface.checkval("pushGroupID",e.pushGroupID)}},appInterface.storeBotParamsLocal=function(e){appInterface.checkValue(e)||appInterface.storeBaseParamsLocal(e)},appInterface.storeAppUrlParamVals=function(){return 1==appInterface.getFocussedApp.WebView()?appInterface.storeWebViewParamsLocal(appInterface.getUrlParameters()):1==appInterface.getFocussedApp.BOTS()?appInterface.storeBotParamsLocal(appInterface.getUrlParameters()):void 0},appInterface.storeAppUrlParamVal=function(e,a){var r=appInterface.getUrlParameter(a);localStorage.setItem(e,r)},appInterface.getAppUrlParam=function(e){return appInterface.getUrlParameter(e)},appInterface.getAppUrlParams=function(){return appInterface.getUrlParameters()},appInterface.Mobile=function(){return appInterface.isMobile},appInterface.isMobile={Windows:function(){return/IEMobile/i.test(navigator.userAgent)},Android:function(){return/Android/i.test(navigator.userAgent)},BlackBerry:function(){return/BlackBerry/i.test(navigator.userAgent)},iOS:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Windows()}};
"web-prod.xpresso.me"==location.hostname?(window.fbAsyncInit=function(){FB.init({appId:0x7b5209034f3f4,xfbml:!0,version:"v2.8"}),FB.AppEvents.logPageView()},function(e,n,t){var o,s=e.getElementsByTagName(n)[0];e.getElementById(t)||(o=e.createElement(n),o.id=t,o.src="//connect.facebook.net/en_US/sdk.js",s.parentNode.insertBefore(o,s))}(document,"script","facebook-jssdk")):(window.fbAsyncInit=function(){FB.init({appId:398384563845299,xfbml:!0,version:"v2.8"}),FB.AppEvents.logPageView()},function(e,n,t){var o,s=e.getElementsByTagName(n)[0];e.getElementById(t)||(o=e.createElement(n),o.id=t,o.src="//connect.facebook.net/en_US/sdk/debug.js",s.parentNode.insertBefore(o,s))}(document,"script","facebook-jssdk"));
!function(){"use strict";function t(t,e){var i=this;i.mainSvc=e,i.getPageDetails=function(){i.mainSvc.getPageDetails().success(function(t){i.pageDetails=t})},i.init=function(){i.getPageDetails()},i.init()}t.$inject=["$state","MainService"],angular.module("xpresso").controller("MainController",t)}();
!function(){"use strict";function e(e){var t=this;t.getPageDetails=function(){return e({method:"GET",url:"assets/data/pageDetails.json"})}}e.$inject=["$http"],angular.module("xpresso").service("MainService",e)}();
var webViewBridge=function(){function e(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;e.length;)if(navigator.platform===e.pop())return!0;return!1}function t(e){var t=window.webkit;if(void 0==t){var o="iosbridge://"+JSON.stringify(e);openCustomURLinIFrame(o)}else window.webkit.messageHandlers.observe.postMessage(e)}this.isiOSPlatform=function(){return e()},this.loadBridge=function(){},this.inviteToXpresso=function(o,n){var r={method:"fb_invite_to_xpresso",previewLink:o,appLink:n};console.log("fb_invite_to_xpresso previewimg "+o),e()?t(r):prompt("bridge_key",JSON.stringify(r))},this.inviteFriendAvatar=function(o,n){var r={method:"invite_friend_avatar",avByteCode:n,dataUrl:o};console.log("inviteFriendAvatar "+r),e()?t(r):prompt("bridge_key",JSON.stringify(r))},this.shareXpressoFB=function(o){var n={method:"shareXpressoOnFB",text:o};e()?t(n):prompt("bridge_key",JSON.stringify(n))},this.save_gender=function(o){var n={method:"save_gender",gender:o};e()?t(n):prompt("bridge_key",JSON.stringify(n))},this.save_avatar_byte_code=function(o){var n={method:"save_avatar_byte_code",avatarString:o};e()?t(n):prompt("bridge_key",JSON.stringify(n))},this.save_avatar=function(o){var n={method:"save_avatar",avatarString:o};e()?t(n):prompt("bridge_key",JSON.stringify(n))},this.launch_gender=function(){var o={method:"launch_gender_selection"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.save_default_job_id=function(o){var n={method:"save_default_job_id",trending:o};e()?t(n):prompt("bridge_key",JSON.stringify(n))},this.invite=function(){var o={method:"invite"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.superHero=function(){var o={method:"superhero_campaign"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.fbLike=function(){var o={method:"fbLike"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.sendLocale=function(o){var n={method:"locale",locale:o};e()?t(n):prompt("bridge_key",JSON.stringify(n))},this.share=function(o){var n=localStorage.getItem("animationExtension"),r=localStorage.getItem("campaignCurrentIndex"),i={method:"share",url:o,ext:n};if(1729!=r){var a=localStorage.getItem("campaignTeamName");i={method:"share",url:o,ext:n,superHero:a}}e()?t(i):prompt("bridge_key",JSON.stringify(i))},this.get_token_async=function(){var o={method:"get_token_async"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.get_uuid_async=function(){var o={method:"get_uuid_async"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.get_token=function(e){localStorage.setItem("OAuthToken",e)},this.set_uuid=function(e){localStorage.setItem("UUID",e);var t=localStorage.getItem("UUID");analyticsFunc.setTracker(t)},this.onJWTTokenExpired=function(){var o={method:"onJWTTokenExpired"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.set_reinit_params=function(e,t,o,n,r,i){localStorage.setItem("bytecode",e),localStorage.setItem("defaultJobToken",n),localStorage.setItem("avatar",t),localStorage.setItem("gender",o),localStorage.setItem("OAuthToken",r);this.dismiss_progress();try{angular.element(document.getElementById("GroupHomeController")).scope().setLocalStorage(e,t,o,n,r,i)}catch(a){}try{angular.element(document.getElementById("GroupHomeControllerKeyboard")).scope().setLocalStorage(e,t,o,n,r,i)}catch(a){}},this.reLoadPage=function(e){alert("reLoadPage")},this.get_reinit_params=function(){var o={method:"get_reinit_params"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.show_progress=function(o){var n={method:"show_progress"};e()?t(n):prompt("bridge_key",JSON.stringify(n))},this.dismiss_progress=function(){var o={method:"dismiss_progress"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.loadOnError=function(){var o={method:"loadNWError"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.sayHello=function(o,n){var r={method:"sayHello",contact:o,subject:n};e()?t(r):prompt("bridge_key",JSON.stringify(r))},this.changeTheme=function(o){var n={method:"changeTheme",isDefault:o};e()?t(n):prompt("bridge_key",JSON.stringify(n))},this.showToast=function(o){var o={method:"showToast",message:o};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.setLaunchedApp=function(e){localStorage.setItem("App",e);var t=angular.element(document.getElementById("genderSelection"));try{t.scope().launchUiBasedOnAppState(e)}catch(o){}t=angular.element(document.getElementById("avDesign"));try{t.scope().launchUiBasedOnAppState(e)}catch(o){}t=angular.element(document.getElementById("GroupHomeController"));try{t.scope().setLauchedApp(e)}catch(o){}t=angular.element(document.getElementById("GroupHomeControllerKeyboard"));try{t.scope().setLauchedApp(e)}catch(o){}t=angular.element(document.getElementById("AnimHomeController"));try{t.scope().setLauchedApp(e)}catch(o){}t=angular.element(document.getElementById("AnimHomeControllerKeyboard"));try{t.scope().setLauchedApp(e)}catch(o){}},this.getLaunchedApp=function(){var o={method:"getLaunchedApp"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.setLocale=function(e){localStorage.setItem("Locale",e)},this.setAppVersion=function(e){console.log("setAppVersion::appVersion "+e),appInterface.isAppUpdated(localStorage.getItem("appversion"),params.version)&&localStorage.setItem("appversion",e),appPayment.setUserInfo(params)},this.get_app_version=function(){var o={method:"get_app_version"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.launchFb=function(){var o={method:"launchFb"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.launchPlayStore=function(o){var n={method:"launchPlayStore",url:o};e()?t(n):prompt("bridge_key",JSON.stringify(n))},this.getPopupState=function(o){var n={method:"setPopupState",state:o};e()?t(n):prompt("bridge_key",JSON.stringify(n))},this.dismissPopup=function(){ele=angular.element(document.getElementById("avDesign"));try{ele.scope().checkPopup()}catch(e){}ele=angular.element(document.getElementById("GroupHomeController"));try{ele.scope().checkPopup()}catch(e){}ele=angular.element(document.getElementById("AnimHomeController"));try{ele.scope().checkPopup()}catch(e){}ele=angular.element(document.getElementById("mwallet"));try{ele.scope().checkPopup()}catch(e){}},this.onGOClicked=function(){ele=angular.element(document.getElementById("AnimHomeController"));try{ele.scope().onGOClicked()}catch(e){}},this.backPressed=function(){var e=0;ele=angular.element(document.getElementById("genderSelection"));try{ele.scope().backPressedAction(),e=62}catch(t){}ele=angular.element(document.getElementById("avDesign"));try{ele.scope().backPressedAction(),e=61}catch(t){}ele=angular.element(document.getElementById("GroupHomeController"));try{ele.scope().backPressedAction(),e=59}catch(t){}ele=angular.element(document.getElementById("AnimHomeController"));try{ele.scope().backPressedAction(),e=55}catch(t){}ele=angular.element(document.getElementById("SearchHomeController"));try{ele.scope().backPressedAction(),e=47}catch(t){}ele=angular.element(document.getElementById("invite"));try{ele.scope().backPressedAction(),e=31}catch(t){}ele=angular.element(document.getElementById("language"));try{ele.scope().backPressedAction(),e=30}catch(t){}ele=angular.element(document.getElementById("wallet"));try{ele.scope().backPressedAction(),e=29}catch(t){}ele=angular.element(document.getElementById("mwallet"));try{ele.scope().backPressedAction(),e=28}catch(t){}var o="BACK_PRESSED",n=localStorage.getItem("UUID");null!=n&&void 0!=n&&"undefined"!=n?ga("send",{hitType:"event",eventCategory:o,eventAction:"BACK_BUTTON_PRESSED",eventLabel:null,dimension1:n}):ga("send",{hitType:"event",eventCategory:o,eventAction:"BACK_BUTTON_PRESSED",eventLabel:null})},this.closeApp=function(o){var n={method:"closeApp",state:o};e()?t(n):prompt("bridge_key",JSON.stringify(n))},this.showKeypad=function(){var o={method:"showKeypad"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.hideKeypad=function(){var o={method:"hideKeypad"};e()?t(o):prompt("bridge_key",JSON.stringify(o))},this.isMobile=function(){return appInterface.Mobile()},this.launchAccessibility=function(t){var o={method:"launchAccessibility",state:t};e()?window.webkit.messageHandlers.observe.postMessage(o):prompt("bridge_key",JSON.stringify(o))},this.getAccessibilityState=function(){var t={method:"getAccessibilityState"};e()?window.webkit.messageHandlers.observe.postMessage(t):prompt("bridge_key",JSON.stringify(t))},this.setReferrerState=function(t){var o={method:"setReferrerState",state:t};e()?window.webkit.messageHandlers.observe.postMessage(o):prompt("bridge_key",JSON.stringify(o))},this.setAccessibilityState=function(e){localStorage.setItem("accessibilityState",e)},this.onInputClicked=function(){var o={method:"onInputClicked"};e()&&t(o)},this.setKeyboardState=function(e){var t=angular.element(document.getElementById("AnimHomeControllerKeyboard"));try{t.scope().onKeyboardStateChanged(e)}catch(o){console.log("Method not found")}t=angular.element(document.getElementById("GroupHomeControllerKeyboard"));try{t.scope().onKeyboardStateChanged(e)}catch(o){console.log("Method not found")}t=angular.element(document.getElementById("searchHomeControllerKeyboard"));try{t.scope().onSearchKeyboardStateChanged(e)}catch(o){console.log("Method not found")}},this.show_video=function(){var t={method:"show_video"};e()?window.webkit.messageHandlers.observe.postMessage(t):prompt("bridge_key",JSON.stringify(t))},this.set_banner_flags=function(t){var o={method:"set_banner_flags",flags:t};e()?window.webkit.messageHandlers.observe.postMessage(o):prompt("bridge_key",JSON.stringify(o))},this.show_InterstitialAd=function(){var t={method:"show_InterstitialAd"};e()?window.webkit.messageHandlers.observe.postMessage(t):prompt("bridge_key",JSON.stringify(t))},this.show_top_banner=function(){var t={method:"show_top_banner"};e()?window.webkit.messageHandlers.observe.postMessage(t):prompt("bridge_key",JSON.stringify(t))},this.hide_top_banner=function(){var t={method:"hide_top_banner"};e()?window.webkit.messageHandlers.observe.postMessage(t):prompt("bridge_key",JSON.stringify(t))},this.show_bottom_banner=function(){var t={method:"show_bottom_banner"};e()?window.webkit.messageHandlers.observe.postMessage(t):prompt("bridge_key",JSON.stringify(t))},this.hide_bottom_banner=function(){var t={method:"hide_bottom_banner"};e()?window.webkit.messageHandlers.observe.postMessage(t):prompt("bridge_key",JSON.stringify(t))},this.openCustomURLinIFrame=function(e){var t=document.createElement("iframe");t.style.display="none",t.src="https://"+e,document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}};
!function(){"use strict";function t(t,a,e,i){a.gridOptions={infiniteScrollRowsFromEnd:40,infiniteScrollUp:!0,infiniteScrollDown:!0,columnDefs:[{name:"productID"},{name:"productName"},{name:"Image",field:"imageURL[0].LargeURL"}],data:"data",onRegisterApi:function(t){t.infiniteScroll.on.needLoadMoreData(a,a.getDataDown),t.infiniteScroll.on.needLoadMoreDataTop(a,a.getDataUp),a.gridApi=t}},a.data=[],a.firstPage=2,a.lastPage=2,a.getFirstData=function(){return e.get("../assets/data/mongodump.json").then(function(t){var e=a.getPage(t.data,a.lastPage);a.data=a.data.concat(e),console.log(a.data)})},a.getDataDown=function(){return e.get("../assets/data/mongodump.json").then(function(t){a.lastPage++;var e=a.getPage(t.data,a.lastPage);return a.gridApi.infiniteScroll.saveScrollPercentage(),a.data=a.data.concat(e),a.gridApi.infiniteScroll.dataLoaded(a.firstPage>0,a.lastPage<4).then(function(){a.checkDataLength("up")})})["catch"](function(t){return a.gridApi.infiniteScroll.dataLoaded()})},a.getDataUp=function(){return e.get("../assets/data/mongodump.json").then(function(t){a.firstPage--;var e=a.getPage(t.data,a.firstPage);return a.gridApi.infiniteScroll.saveScrollPercentage(),a.data=e.concat(a.data),a.gridApi.infiniteScroll.dataLoaded(a.firstPage>0,a.lastPage<4).then(function(){a.checkDataLength("down")})})["catch"](function(t){return a.gridApi.infiniteScroll.dataLoaded()})},a.getPage=function(t,a){for(var e=[],i=100*a;100*(a+1)>i&&i<t.length;++i)e.push(t[i]);return e},a.checkDataLength=function(t){a.lastPage-a.firstPage>3&&(a.gridApi.infiniteScroll.saveScrollPercentage(),"up"===t?(a.data=a.data.slice(100),a.firstPage++,i(function(){a.gridApi.infiniteScroll.dataRemovedTop(a.firstPage>0,a.lastPage<4)})):(a.data=a.data.slice(0,400),a.lastPage--,i(function(){a.gridApi.infiniteScroll.dataRemovedBottom(a.firstPage>0,a.lastPage<4)})))},a.reset=function(){a.firstPage=2,a.lastPage=2,a.gridApi.infiniteScroll.setScrollDirections(!1,!1),a.data=[],a.getFirstData().then(function(){i(function(){a.gridApi.infiniteScroll.resetScroll(a.firstPage>0,a.lastPage<4)})})},a.getFirstData().then(function(){i(function(){a.gridApi.infiniteScroll.resetScroll(a.firstPage>0,a.lastPage<4)})})}t.$inject=["UigridService","$scope","$http","$timeout"],angular.module("xpresso").controller("UigridController",t)}();
!function(){"use strict";function e(e){var t=this;t.getPageDetails=function(){return e({method:"GET",url:"assets/data/pageDetails.json"})}}e.$inject=["$http"],angular.module("xpresso").service("UigridService",e)}();
!function(){"use strict";function o(){return{remoteBaseURL:"https://violet.mobigraph.co",animationFolder:"app/app_resources/animations",resourcesURL:"app/app_resources/resources/av",yuko_json:"yuko_avconfig.json",cody_json:"cody_avconfig.json",groups_json:"ContentStoreMetadata.json",keypad_groups_json:"ContentStoreMetadata_keypad.json",theme_json:"Themes.json",trending_json:"TrendingAnims.json",groups_home:"Mother.json",outfit_json:"timeless.json",is_href:"1",string_json:"string.json",languageFolder:"app/app_resources/language",languageList:"app/app_resources",language_json:"language.json"}}angular.module("xpresso").service("Config",o)}();
!function(){"use strict";function E(){return{NO_INTERNET:"No Network. Please try again.",FACEBOOK:"FB_Messenger",XPRESSO_FOR_WHATSAPP:"Xpressoforwhatsapp",ENGLISH:"en",CHINESE:"zh",CONTENTMETASTORE_VERSION:"?rev=0.2.16",TRENDING:"?rev=0.2.22",CODY_TIMELESS_IN:"?rev=0.0.99",CODY_TIMELESS_US:"?rev=0.0.99",CODY_TIMELESS_OTHERS:"?rev=0.0.99",CODY_AVCONFIG:"?rev=0.1.02",YUKO_TIMELESS_IN:"?rev=0.0.99",YUKO_TIMELESS_US:"?rev=0.0.99",YUKO_TIMELESS_OTHERS:"?rev=0.0.99",YUKO_AVCONFIG:"?rev=0.1.02",SUPERHERO_OUTFIT:"superHeroOutfit",CHRISTMAS_OUTFIT:"christmasOutfit",SUPER_HERO_COMBO:"superheroOutfitCombo",CHRISTMAS_COMBO:"christmasOutfitCombo",CAMPAIGN:"?rev=0.0.3",HALLOWEEN:"?rev=0.0.4",RATING_POPUP:"?rev=0.0.5",USER_HINT_POPUP:"?rev=0.0.2",AVATAR_CAMPAIGN_POPUP:"?rev=0.0.1",SUCCESS:200,ACCEPTED:202,NOT_FOUND:404,RETRY:429,JWT_TOKEN_EXPIRED:401}}angular.module("xpresso").service("XConstants",E)}();
!function(){"use strict";function _(_,e,t,E,s,i,p,P){function o(){var _=localStorage.getItem("stringJson");p.checkValue(_)||(a=JSON.parse(_)),O.YES_IM_READY=a.yes_im_ready,O.CREATE_INVITE=a.create_invite,O.SAVE_AND_PROCEED=a.save_and_proceed,O.CREATE_FRIENDS_AVATAR=a.create_friends_avatar,O.TRENDING=a.trending,O.GROUP_SEARCH_HINT=a.group_search_hint,O.GROUP_HOME_DESC=a.group_home_desc,O.CONTACT=a.contact,O.RATE_US=a.rate_us,O.TERMS=a.terms,O.PRIVACY=a.privacy,O.TELL_FRIEND=a.tell_a_friend,O.ENABLE_ACCESSIBILITY=a.enable_accessibility,O.DISABLE_ACCESSIBILITY=a.disable_accessibility,O.CHANGE_GENDER=a.change_gender,O.OK_GOT_IT=a.ok_got_it,O.NEXT=a.next,O.ANIM_SEARCH_HINT=a.anim_search_hint,O.INVITE_DESC1=a.invite_desc1,O.INVITE_DESC2=a.invite_desc2,O.INVITE_DESC3=a.invite_desc3,O.INVITE_START=a.invite_start,O.ONE=a.one,O.TWO=a.two,O.THREE=a.three,O.NO_THANKS=a.no_thanks,O.POPUP_EXIT_AVATAR1=a.popup_exit_avatar1,O.POPUP_EXIT_AVATAR2=a.popup_exit_avatar2,O.POPUP_EXIT_AVATAR_YES=a.popup_exit_avatar_yes,O.POPUP_EXIT_AVATAR_NO=a.popup_exit_avatar_no,O.POPUP_SUPERHERO_LOCK_TITLE1=a.popup_lock_title1,O.POPUP_SUPERHERO_LOCK_TITLE2=a.popup_lock_title2,O.POPUP_SUPERHERO_LOCK_DESC=a.popup_lock_desc,O.POPUP_AVATAR_CAMP_DESC=a.popup_avatar_camp_desc,O.WHOOPS=a.whoops,O.WENT_WRONG=a.went_wrong,O.DISK_SPACE=a.disk_space,O.DATA_USUAGE=a.data_usuage,O.TOO_SLOW=a.too_slow,O.SUBMIT_REVIEW=a.submit_review,O.POPUP_CUSTOM_TEXT=a.popup_custom_text,O.POPUP_FB_SHARE=a.popup_fb_share,O.POPUP_FB_SHARE_COUNT=a.popup_fb_share_count,O.POPUP_FB_SHARE_GIF=a.popup_fb_share_gif,O.POPUP_ICON_SEL_TEXT1=a.popup_icon_sel_text1,O.POPUP_ICON_SEL_TEXT2=a.popup_icon_sel_text2,O.POPUP_ICON_SEL_OK=a.popup_icon_sel_ok,O.POPUP_RATE_US_LATER=a.popup_rate_us_later,O.POPUP_RATE_US_YES=a.popup_rate_us_yes,O.POPUP_RATE_US_TITLE=a.popup_rate_us_title,O.POPUP_RATE_US_COMMENT=a.popup_rate_us_comment,O.POPUP_SUPERHEROES_CLOSE=a.popup_superheroes_close,O.POPUP_SUPERHEROES_LOAD=a.popup_superheroes_load,O.POPUP_HALLOWEEN_LOAD=a.popup_halloween_load,O.POPUP_HALLOWEEN_UNLOCK_TEXT1=a.popup_halloween_unlock_text1,O.POPUP_HALLOWEEN_UNLOCK_TEXT2=a.popup_halloween_unlock_text2,O.LANGUAGE=a.language,O.CURRENT_LANGUAGE=a.currentLanguage,O.PACKS=a.packs}var a,O=this,T=localStorage.getItem("stringJson");p.checkValue(T)||(a=JSON.parse(T)),this.getString=function(){var _=P.getLanguage();DebugUtils.isGroupHomeDebugEnabled()&&console.log("getString service language "+_),p.checkValue(_)||i.getString(_).then(function(_){a=_,DebugUtils.isGroupHomeDebugEnabled()&&console.log("service data "+a.yes_im_ready+" "+a.trending);var e=JSON.stringify(a);localStorage.setItem("stringJson",e),o()})["catch"](function(_){DebugUtils.isGroupHomeDebugEnabled()&&console.log("Error strings: "+_)})},this.getPackNames=function(_){var e=localStorage.getItem("stringJson");return p.checkValue(e)||(a=JSON.parse(e)),p.checkValue(a)?_:a[_]};try{this.YES_IM_READY=a.yes_im_ready,this.CREATE_INVITE=a.create_invite,this.SAVE_AND_PROCEED=a.save_and_proceed,this.CREATE_FRIENDS_AVATAR=a.create_friends_avatar,this.TRENDING=a.trending,this.GROUP_SEARCH_HINT=a.group_search_hint,this.GROUP_HOME_DESC=a.group_home_desc,this.CONTACT=a.contact,this.RATE_US=a.rate_us,this.TERMS=a.terms,this.PRIVACY=a.privacy,this.TELL_FRIEND=a.tell_a_friend,this.ENABLE_ACCESSIBILITY=a.enable_accessibility,this.DISABLE_ACCESSIBILITY=a.disable_accessibility,this.CHANGE_GENDER=a.change_gender,this.OK_GOT_IT=a.ok_got_it,this.NEXT=a.next,this.ANIM_SEARCH_HINT=a.anim_search_hint,this.INVITE_DESC1=a.invite_desc1,this.INVITE_DESC2=a.invite_desc2,this.INVITE_DESC3=a.invite_desc3,this.INVITE_START=a.invite_start,this.ONE=a.one,this.TWO=a.two,this.THREE=a.three,this.NO_THANKS=a.no_thanks,this.POPUP_EXIT_AVATAR1=a.popup_exit_avatar1,this.POPUP_EXIT_AVATAR2=a.popup_exit_avatar2,this.POPUP_EXIT_AVATAR_YES=a.popup_exit_avatar_yes,this.POPUP_EXIT_AVATAR_NO=a.popup_exit_avatar_no,this.POPUP_SUPERHERO_LOCK_TITLE1=a.popup_lock_title1,this.POPUP_SUPERHERO_LOCK_TITLE2=a.popup_lock_title2,this.POPUP_SUPERHERO_LOCK_DESC=a.popup_lock_desc,this.POPUP_AVATAR_CAMP_DESC=a.popup_avatar_camp_desc,this.WHOOPS=a.whoops,this.WENT_WRONG=a.went_wrong,this.DISK_SPACE=a.disk_space,this.DATA_USUAGE=a.data_usuage,this.TOO_SLOW=a.too_slow,this.SUBMIT_REVIEW=a.submit_review,this.POPUP_CUSTOM_TEXT=a.popup_custom_text,this.POPUP_FB_SHARE=a.popup_fb_share,this.POPUP_FB_SHARE_COUNT=a.popup_fb_share_count,this.POPUP_FB_SHARE_GIF=a.popup_fb_share_gif,this.POPUP_ICON_SEL_TEXT1=a.popup_icon_sel_text1,this.POPUP_ICON_SEL_TEXT2=a.popup_icon_sel_text2,this.POPUP_ICON_SEL_OK=a.popup_icon_sel_ok,this.POPUP_RATE_US_LATER=a.popup_rate_us_later,this.POPUP_RATE_US_YES=a.popup_rate_us_yes,this.POPUP_RATE_US_TITLE=a.popup_rate_us_title,this.POPUP_RATE_US_COMMENT=a.popup_rate_us_comment,this.POPUP_SUPERHEROES_CLOSE=a.popup_superheroes_close,this.POPUP_SUPERHEROES_LOAD=a.popup_superheroes_load,this.POPUP_HALLOWEEN_LOAD=a.popup_halloween_load,this.POPUP_HALLOWEEN_UNLOCK_TEXT1=a.popup_halloween_unlock_text1,this.POPUP_HALLOWEEN_UNLOCK_TEXT2=a.popup_halloween_unlock_text2,this.LANGUAGE=a.language,this.CURRENT_LANGUAGE=a.currentLanguage,this.PACKS=a.packs}catch(r){console.log("Exception "+r),this.getString()}}_.$inject=["$http","$q","Paths","Config","GenderService","HTTPClient","GlobalService","AvatarDesignService"],angular.module("xpresso").service("LocalStorageService",_)}();
!function(){"use strict";function o(o,n){this.remoteBaseURL=function(){return o.remoteBaseURL},this.genderResourcesPath=function(n){var t=o.resourcesURL,r="male"==n?"/cody":"/yuko";return t+r},this.genderAVConfigPath=function(n){var t=this.genderResourcesPath(n),r="male"==n?o.cody_json:o.yuko_json;return t+"/"+r},this.groupsJSONPath=function(t){var r=o.groups_json,e=n.isKeyboard();void 0!=e&&1==e&&(r=o.keypad_groups_json);var s=this.getCountryName(t);return o.animationFolder+"/country/"+s+"/"+r},this.themesJSONPath=function(n){var t=o.theme_json,r=this.getCountryName(n);return o.animationFolder+"/country/"+r+"/"+t},this.stringJSONPath=function(n){var t=o.string_json;return o.languageFolder+"/"+n+"/"+t},this.languageJSONPath=function(){var n=o.language_json;return o.languageList+"/"+n},this.getCountryName=function(o){return("undefined"==o||void 0==o||null==o||"null"==o||"null"==o||"(null)"==o||" "==o||" "==o||"XX"==o)&&(o="others"),o},this.trendingJSONPath=function(n){var t=this.getCountryName(n);return o.animationFolder+"/country/"+t+"/"+o.trending_json},this.groupsHomePath=function(){return o.animationFolder+"/"+o.groups_home},this.outfitPathForGender=function(n,t){var r=this.genderResourcesPath(n),e=this.getCountryName(t);r=r+"/outfit/country/"+e;var s=o.outfit_json;return r+"/"+s},this.colorResourcesBasePath=function(){var n=o.resourcesURL;return n+="/colors/color_swatch"},this.colorTablesPath=function(){for(var o=[],n=this.colorResourcesBasePath(),t=["common_colors.json","hair_colors.json","skin_colors.json","eye_colors.json","lip_colors.json"],r=0;r<t.length;r++){var e=t[r],s=n+"/"+e;o.push(s)}return o}}o.$inject=["Config","GlobalService"],angular.module("xpresso").service("Paths",o)}();
!function(){"use strict";function e(e,t,n,o,a,i,r,c,s){var u=this,l=bridgeInterFace.getInstance();this.checkGIF=function(e,t,n,a,u,h,g,v){if(n>7)return!1;var C=o.remoteBaseURL+"/"+t+"/"+e+".gif";r.checkGIFReady(e,t,function(o){if(200==o){l.share(C);var S=e,f="GROUPHOME_SCREEN_CATEGORY";"groupHome"==h?S="Trending : "+e:(f=a,S=0==g?"Default : "+e:"Custom : "+e),v==s.FACEBOOK&&i.eventonFaceBookClick(u,f,S),i.eventAnimationClick(u,f,S);var p=parseInt(r.getAppShareCount());if(p=p||0,c.checkValue(p)&&(p=0),p+=1,v==s.FACEBOOK)r.saveAppShareCount(p);else{var m=parseInt(r.getShareCount());m=m||0,c.checkValue(m)&&(m=0),m+=1,r.saveShareCount(m),r.saveAppShareCount(p)}return!0}setTimeout(function(){n+=1,checkGIF(e,t,n,a,u,h,g,v)},2e3)})},this.shareAnimation=function(e,t,n,o,i,c){var l=[];l[0]=e;var h={},g=(a.getByteCode(),a.getLanguageForApi());h=0==t?{animIds:l,resolution:"high",locale:g}:{text:text,animIds:l,resolution:"high",locale:g},r.getNewJobToken(h,function(a,r,l){if(a==s.SUCCESS||a==s.ACCEPTED){DebugUtils.isGroupHomeDebugEnabled()&&(console.log("Status Code : "+a),console.log("Wait Time : "+r),console.log("Job Token : "+l));var h=0;return u.checkGIF(e,l,h,n,o,i,t,c)}return a==s.RETRY?u.shareAnimation(e):!1})}}e.$inject=["$http","$q","Paths","Config","AvatarDesignService","AnalyticsService","GroupHomeService","GlobalService","XConstants"],angular.module("xpresso").service("GIFService",e)}();
!function(){"use strict";function e(e,t,r,n,o,s,i){var a="abc@123,";this.avatarConfig=function(n){var o;o="male"==n?i.CODY_AVCONFIG:i.YUKO_AVCONFIG;var s=t.defer(),u=r.genderAVConfigPath(n)+o;return e.get(u).success(function(e){var t=e,r=CryptoJS.AES.decrypt(t,a),n=JSON.parse(r.toString(CryptoJS.enc.Utf8)),o=n.AvConfig,i=o.av,u="";return i.length>0&&(u=i[0]),s.resolve(u)}).error(function(e){return s.reject("error")}),s.promise},this.allColorsTable=function(){for(var n=t.defer(),o=r.colorTablesPath(),s=[],i=0;i<o.length;i++){var a=o[i],u=e.get(a);s.push(u)}var n=t.defer();return t.all(s).then(function(e){for(var t={},r=0;r<e.length;r++){var s=e[r],i=s.data.colors,a=o[r],u=a.split("/").pop();t[u]=i}return n.resolve(t)})["catch"](function(e){return n.reject("error")}),n.promise},this.getCountryName=function(){var e=o.getCountryName();return s.checkValue(e)?(this.getIPInfo().then(function(t){"IN"!=t&&"US"!=t&&"CN"!=t&&(t="others"),e=t,o.saveCountryName(t)})["catch"](function(t){return e="others"}),e):("IN"!=e&&"US"!=e&&"CN"!=e&&(e="others"),o.saveCountryName(e),e)},this.outfits=function(n,o){var s=this.getVersionBasedOnCountry(o,"TIMELESS",n),i=t.defer(),u=r.outfitPathForGender(n,o)+s;return e.get(u).success(function(e){var t=e,r=CryptoJS.AES.decrypt(t,a),n=JSON.parse(r.toString(CryptoJS.enc.Utf8)),o=n.outfit;return i.resolve(o)}).error(function(e){return i.reject("error")}),i.promise},this.submitByteCode=function(e,t){var r=n.remoteBaseURL,s=r+"/avc/"+encodeURIComponent(e),i="Bearer "+o.getAuthTokenFromLocalStorage(),a=new XMLHttpRequest;a.open("POST",s),a.setRequestHeader("Authorization",i),a.onreadystatechange=function(){if(4===this.readyState){var e=this.getResponseHeader("Retry-After"),r=this.getResponseHeader("X-Job-Token");return t(this.status,e,r)}},a.send()},this.getVersionBasedOnCountry=function(e,t,r){switch(t){case"CONTENTMETASTORE":return i.CONTENTMETASTORE_VERSION;case"TRENDING":return i.TRENDING;case"TIMELESS":if("male"==r)switch(e){case"IN":return i.CODY_TIMELESS_IN;case"US":return i.CODY_TIMELESS_US;default:return i.CODY_TIMELESS_OTHERS}else switch(e){case"IN":return i.YUKO_TIMELESS_IN;case"US":return i.YUKO_TIMELESS_US;default:return i.YUKO_TIMELESS_OTHERS}break;case"LANGUAGE":switch(e){case"IN":return i.ENGLISH;case"US":return i.ENGLISH;case"CN":return i.CHINESE;default:return i.ENGLISH}}},this.getCampaignGroup=function(n){var o=localStorage.getItem("gender"),s=t.defer(),a=r.genderResourcesPath(o);return a=a+"/outfit/"+n+i.CAMPAIGN,e.get(a).success(function(e){return s.resolve(e)}).error(function(e){return s.reject("error")}),s.promise},this.getCampaignHalloweenGroup=function(){var n=localStorage.getItem("gender"),o=t.defer(),s=r.genderResourcesPath(n);return s=s+"/outfit/halloween_camp.json"+i.HALLOWEEN,e.get(s).success(function(e){return o.resolve(e)}).error(function(e){return o.reject("error")}),o.promise},this.getCampaignCounter=function(e){var t=n.remoteBaseURL+"/campaigns/ipl/stats",r="Bearer "+o.getAuthTokenFromLocalStorage(),s=new XMLHttpRequest;s.open("GET",t),s.setRequestHeader("Authorization",r),s.onreadystatechange=function(){if(4==this.readyState){var t=this.response;return e(JSON.parse(t))}},s.send()},this.campaignVote=function(e,t,r){var o=n.remoteBaseURL+"/campaigns/"+e+"/"+t,s=new XMLHttpRequest,i=localStorage.getItem("OAuthToken"),a="Bearer "+i;s.open("POST",o),s.setRequestHeader("Authorization",a),s.onreadystatechange=function(){return 4===this.readyState?r(this.status):void 0},s.send()},this.getTrending=function(n){var s=this.getCountryBasedOnLocale(),i=this.getVersionBasedOnCountry(s,"TRENDING",o.getGender()),a=t.defer(),u=r.trendingJSONPath(s)+i;return console.log("getTrending jsonURL "+u),e.get(u).success(function(e){var t=e.trending,r=t.anims;return a.resolve(r)}).error(function(e){return a.reject("error")}),a.promise},this.getLanguageList=function(){var n=t.defer(),o=r.languageJSONPath();return console.log("My getLanguageList path :: ",o),e.get(o).success(function(e){var t=e.language;return n.resolve(t)}).error(function(e){return n.reject("error")}),n.promise},this.getString=function(n){var o=t.defer(),s=r.stringJSONPath(n);return e.get(s).success(function(e){var t=e.string;return o.resolve(t)}).error(function(e){return o.reject("error")}),o.promise},this.getCountryBasedOnLocale=function(){var e=localStorage.getItem("language");if(console.log("getCountryBasedOnLocale "+e),s.checkValue(e))return o.getCountryName();if("zh"==e)return"CN";var t=this.getCountryName();return s.checkValue(t)?o.getCountryName():"CN"==t?"others":o.getCountryName()},this.getGroups=function(n){var s=this.getCountryBasedOnLocale(),i=this.getVersionBasedOnCountry(s,"CONTENTMETASTORE",o.getGender()),a=t.defer(),u=r.groupsJSONPath(s)+i;return console.log("My ContentStoreMetadata path :: ",u),e.get(u).success(function(e){var t=e.ContentStoreMetadata,r=t.LastModified,o=t.Groups,s=AnimHomeService.getLastModified();if(s!=r&&(AnimHomeService.setLikeVisited(0),AnimHomeService.setLoveVisited(0),AnimHomeService.setHugVisited(0),AnimHomeService.setHeyVisited(0),AnimHomeService.setDailyBitsVisited(0),AnimHomeService.setChillinVisited(0),AnimHomeService.setLolVisited(0),AnimHomeService.setTeaseVisited(0),AnimHomeService.setJoyVisited(0),AnimHomeService.setWishesVisited(0),AnimHomeService.setPartyVisited(0),AnimHomeService.setByeVisited(0),AnimHomeService.setSadVisited(0),AnimHomeService.setFedupVisited(0),AnimHomeService.setWhatVisited(0),AnimHomeService.setAngryVisited(0),AnimHomeService.setBooVisited(0),AnimHomeService.setScaredVisited(0),AnimHomeService.setIPLVisited(0),AnimHomeService.setLastModified(r)),1==n&&void 0!=o){for(var i=[],u=o.length,c=0;u>c;c++){var g=o[c],d=parseInt(g.status);1==d&&i.push(g)}return a.resolve(i)}return a.resolve(o)}).error(function(e){return a.reject("error")}),a.promise},this.checkGIFReady=function(e,t,r){var o=n.remoteBaseURL,a=localStorage.getItem("language");DebugUtils.isGroupHomeDebugEnabled()&&console.log("service getLanguageForApi stored "+a),s.checkValue(a)&&(a=i.ENGLISH);var u=o+"/xpresso/"+t+"/"+a+"/"+e+".gif";console.log("checkGIFReady url "+u);var c=new XMLHttpRequest;c.open("HEAD",u),c.onreadystatechange=function(){if(4==this.readyState){this.status;return r(this.status)}},c.send()},this.getNewJobToken=function(e,t){var r=n.remoteBaseURL,o=r+"/generate",s=new XMLHttpRequest;console.log("request",s);var i=localStorage.getItem("OAuthToken"),a="Bearer "+i;s.open("POST",o),s.setRequestHeader("Authorization",a),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){if(4===this.readyState){var e=this.getResponseHeader("Retry-After"),r=this.getResponseHeader("X-Job-Token");return t(JSON.parse(s.response),this.status,e,r)}},s.send(JSON.stringify(e))},this.getIPInfo=function(){var r=t.defer(),n="https://ipinfo.io";return e.get(n).success(function(e){var t=e.country;return"IN"!=t&&"US"!=t&&(t="others"),r.resolve(t)}).error(function(e){return r.reject("error")}),r.promise},this.searchAnimationList=function(e,t){var r=n.remoteBaseURL,o=r+"/search",s=new XMLHttpRequest,i=localStorage.getItem("OAuthToken"),a="Bearer "+i;s.open("POST",o),s.setRequestHeader("Authorization",a),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){if(4===this.readyState){var e=this.getResponseHeader("Retry-After"),r=this.getResponseHeader("X-Job-Token"),n=s.responseText;return t(this.status,e,r,n)}},s.send(JSON.stringify(e))},this.getAutoSuggestion=function(e,t){var r=o.getCountryName(),s={text:e,countrycode:r},i=n.remoteBaseURL+"/suggest",a=new XMLHttpRequest,u=localStorage.getItem("OAuthToken"),c="Bearer "+u;a.open("POST",i),a.setRequestHeader("Authorization",c),a.setRequestHeader("Content-Type","application/json"),a.onreadystatechange=function(){if(4===this.readyState){var e=a.responseText;return t(this.status,e)}},a.send(JSON.stringify(s))},this.uploadInviteImage=function(e,t,r){var s=new FormData;s.append("img",e);var i=n.remoteBaseURL,a=encodeURIComponent(t),u=encodeURIComponent("fbinvite"),c=i+"/invites/"+u+"/"+a,g="Bearer "+o.getAuthTokenFromLocalStorage(),d=new XMLHttpRequest;d.open("POST",c),d.setRequestHeader("Authorization",g),d.onreadystatechange=function(){if(4===this.readyState){var e=d.responseText;return console.log("uploadInviteImage responseJson "+e),r(this.status,e)}},d.send(s)}}angular.module("xpresso").service("HTTPClient",e),e.$inject=["$http","$q","Paths","Config","GenderService","GlobalService","XConstants"]}();
!function(){"use strict";function t(t,e,n,s,i){this.setAnalyticsParams=function(t,e,n,s,a){DebugUtils.analyticsService()&&console.log("UUID:: "+a+" HitType:: "+t+" Event_Category:: "+e+" Event_Action:: "+n+" Event_Label:: "+s),i.checkValue(a)?ga("send",{hitType:t,eventCategory:e,eventAction:n,eventValue:1,eventLabel:s}):ga("send",{hitType:t,eventCategory:e,eventAction:n,eventLabel:s,eventValue:1,dimension1:a})},this.updateRuleEngine=function(t){return i.checkValue(t)?void 0:PointsRuleService.updateRule(t)},this.eventOnCustomizationLaunched=function(t){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","CUSTOMIZATION_LAUNCHED",null,t)},this.eventOnAvatarLaunched=function(t){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","DEFAULT_AVATAR_SHOWN",null,t)},this.eventColorChosen=function(t,e){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","COLOR_CHOSEN",e,t)},this.eventCustomizableClicked=function(t,e){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","CUSTOMIZABLE_CLICKED",e,t)},this.eventonCustomizableItemClicked=function(t,e){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","CUSTOMIZABLE_ITEM_SELECTED",e,t)},this.eventonOutfitSelected=function(t,e){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","OUTFIT_SELECTED",e,t)},this.eventOnCancelButtonSelected=function(t){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","CANCEL_BUTTON_SELECTED",null,null)},this.eventonAvatarChosen=function(t,e,n,s){this.setAnalyticsParams("event","OUTFIT_SELECTED",e,n,t),this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","AVATAR_CHOSEN",s,t),this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","CUSTOMIZATION_FINISHED",null,t)},this.eventOnGenderButtonSelected=function(t,e){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","GENDER_BUTTON_PRESSED",e,t)},this.eventonGenderSelected=function(t,e){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","GENDER_CHOSEN",e,t)},this.eventOnSaveButtonSelected=function(t){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","SAVE_AND_PROCEED_BUTTON_SELECTED",null,t)},this.eventOnLastCustomizableTabPressed=function(t){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","CUSTOMIZABLE_LAST_TAB_PRESSED",null,t)},this.eventOnJobTokenGenerated=function(t,e){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","JOB_TOKEN_GENERATED",e,t)},this.eventOnBackButtonPopupYesSelected=function(t){this.setAnalyticsParams("event","BACKBUTTON_AVDESIGN_POPUP","YES_SELECTED",null,t)},this.eventOnBackButtonPopupNoSelected=function(t){this.setAnalyticsParams("event","BACKBUTTON_AVDESIGN_POPUP","NO_SELECTED",null,t)},this.eventonGenderPageOpened=function(t){this.setAnalyticsParams("event","GENDER_SELECTION_PAGE","GENDER_PAGE_OPENED",null,t)},this.eventonGenderSelectedGenderPage=function(t,e){this.setAnalyticsParams("event","GENDER_SELECTION_PAGE","GENDER_SELECTED",e,t)},this.eventonGenderPageClosed=function(t){this.setAnalyticsParams("event","GENDER_SELECTION_PAGE","GENDER_PAGE_CLOSED",null,t)},this.eventonAvatarFinalised=function(t,e,n,s){this.setAnalyticsParams("event",e,n,s,t)},this.eventInviteClicked=function(t){this.setAnalyticsParams("event","GROUP_HOME_CATEGORY","INVITE_ACTION",null,t)},this.eventonAnimationClick=function(t,e){return this.setAnalyticsParams("event","GROUP_HOME_CATEGORY","GROUP_SELECTED",e.name,t),this.updateRuleEngine(e)},this.eventonSearchMainGroupClick=function(t,e){return this.setAnalyticsParams("event","GROUP_HOME_CATEGORY","SEARCHBAR_MAIN_GROUP_SELECTED",e.name,t),this.updateRuleEngine(e)},this.eventonGroupHomeLoad=function(t){this.setAnalyticsParams("event","GROUP_HOME_CATEGORY","GROUP_PAGE_LOADING",null,t)},this.eventOnMagicWandPressed=function(t,e){this.setAnalyticsParams("event","GROUP_HOME_CATEGORY","MAGIC_WAND_PRESSED",e,t)},this.eventOnHintOptionSelected=function(t,e){this.setAnalyticsParams("event","GROUP_HOME_CATEGORY","SEARCH_HINT_SELECTED",e,t)},this.campaignInviteSelected=function(t){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY","INVITE_BUTTON_SELECTED",null,t)},this.campaignGroupIconSelected=function(t,e){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY","CAMPAIGN_GROUP_ICON_SELECTED",e,t)},this.campaignDefaultAvatarSelected=function(t){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY","DEFAULT_AVATAR_ICON_PRESSED",null,t)},this.campaignSuperHeroIconSelected=function(t,e){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY_SUPERHERO","CAMPAIGN_SUPERHERO_ICON_SELECTED",e,t)},this.campaignSuperHeroDefaultIconSelected=function(t,e){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY_SUPERHERO","CAMPAIGN_DEFAULT_AVATAR_SELECTED",null,t)},this.campaignSuperHeroAnimationSelected=function(t,e){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY_SUPERHERO","CAMPAIGN_SUPERHERO_ANIMATION_SELECTED",e,t)},this.campaignHalloweenIconSelected=function(t,e){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY_HALLOWEEN","CAMPAIGN_HALLOWEEN_ICON_SELECTED",e,t)},this.campaignHalloweenDefaultIconSelected=function(t,e){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY_HALLOWEEN","CAMPAIGN_DEFAULT_AVATAR_SELECTED",null,t)},this.campaignHalloweenAnimationSelected=function(t,e){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY_HALLOWEEN","CAMPAIGN_HALLOWEEN_ANIMATION_SELECTED",e,t)},this.campaignDefaultAvatarYesSelected=function(t){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY","DEFAULT_AVATAR_POPUP_YES_SELECTED",null,t)},this.campaignDefaultAvatarNoSelected=function(t){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY","DEFAULT_AVATAR_POPUP_NO_SELECTED",null,t)},this.campaignAvatarFinalised=function(t,e){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY","CAMPAIGN_AVATAR_FINALISED",e,t)},this.campaignSwipedGroupLoaded=function(t,e){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY","CAMPAIGN_GROUP_LOADED_ON_SWIPE",e,t)},this.campaignFacebookInviteSelected=function(t){this.setAnalyticsParams("event","CAMPAIGN_CATEGORY","CAMPAIGN_FACEBOOK_INVITE_SELECTED",null,t)},this.eventonAnimPageLoad=function(t){this.setAnalyticsParams("event","ANIMATIONHOME_SCREEN_CATEGORY","ANIM_PAGE_LOADING",null,t)},this.eventErasePressed=function(t){this.setAnalyticsParams("event","ANIMATIONHOME_SCREEN_CATEGORY","ERASER_PRESSED",null,t)},this.eventGroupClick=function(t,e){return this.setAnalyticsParams("event","ANIMATIONHOME_SCREEN_CATEGORY","SUBGROUP_SELECTED",e.name,t),this.updateRuleEngine(e)},this.eventMagicWandPressed=function(t){this.setAnalyticsParams("event","ANIMATIONHOME_SCREEN_CATEGORY","MAGIC_WAND_PRESSED",null,t)},this.eventAnimationClick=function(t,e,n){this.setAnalyticsParams("event",e,"ANIMATION_SELECTED",n,t)},this.eventonRatingPopupAppeared=function(t,e){this.setAnalyticsParams("event","RATING_POPUP","POPUP_APPEARED",e,t)},this.eventonUserReviewSelected=function(t,e,n){this.setAnalyticsParams("event","USER_REVIEW",e,n,t)},this.eventonPopupTappedOutside=function(t){this.setAnalyticsParams("event","RATING_POPUP","POPUP_CLOSED",null,t)},this.eventonRatingMaybeLaterSelected=function(t){this.setAnalyticsParams("event","RATING_POPUP","MAYBE_LATER_SELECTED",null,t)},this.eventonRatingNoThanksSelected=function(t){this.setAnalyticsParams("event","RATING_POPUP","NO_THANKS_SELECTED",null,t)},this.eventonRatingRateUsSelected=function(t){this.setAnalyticsParams("event","RATING_POPUP","RATEUS_SELECTED",null,t)},this.eventOnCategorySelectionPopup=function(t){this.setAnalyticsParams("event","CATEGORY_GUIDE_POPUP","OKAY_SELECTED",null,t)},this.eventonFbPopupSelected=function(t){this.setAnalyticsParams("event","FACEBOOK_SHARE","Share_Pressed",null,t)},this.eventonFbPageLikeSelected=function(t){this.setAnalyticsParams("event","FACEBOOK_PAGE_LIKE","PAGE_LIKE_PRESSED",null,t)},this.eventonFaceBookClick=function(t,e,n){this.setAnalyticsParams("event",e,"FACEBOOK_ANIMATION_SELECTED",n,t)},this.eventOnAvatarApproved=function(t,e,n){this.setAnalyticsParams("event",e,n,null,t)},this.eventOnAvatarNotApproved=function(t,e,n){this.setAnalyticsParams("event",e,n,null,t)},this.eventTutorialPageLaunched=function(t){this.setAnalyticsParams("event","TUTORIAL_SCREEN","Tutorial_Launched",null,t)},this.eventTutorialGIFLoaded=function(t){this.setAnalyticsParams("event","TUTORIAL_SCREEN","Tutorial_GIF_LOADED",null,t)},this.eventTutorialSkipPressed=function(t){this.setAnalyticsParams("event","TUTORIAL_SCREEN","Tutorial_Skip",null,t)},this.eventTutorialCompleted=function(t){this.setAnalyticsParams("event","TUTORIAL_SCREEN","Tutorial_Completed",null,t)},this.eventTutorialFirstGIFLoaded=function(t){this.setAnalyticsParams("event","TUTORIAL_SCREEN","Tutorial_First_GIF_Loaded",null,t)},this.eventOnSearchPageLoaded=function(t){this.setAnalyticsParams("event","SEARCH_HOME_PAGE","SEARCH_PAGE_LOADED",null,t)},this.eventonSearchErasePressed=function(t){this.setAnalyticsParams("event","SEARCH_HOME_PAGE","ERASER_PRESSED",null,t)},this.eventonSearchMagicWandPressed=function(t){this.setAnalyticsParams("event","SEARCH_HOME_PAGE","MAGIC_WAND_PRESSED",null,t)},this.eventonSearchFaceBookClick=function(t,e){this.setAnalyticsParams("event","SEARCH_HOME_PAGE","FACEBOOK_ANIMATION_SELECTED",e,t)},this.eventonSearchAnimationClick=function(t,e){this.setAnalyticsParams("event","SEARCH_HOME_PAGE","SEARCH_PAGE_ANIMATION_SELECTED",e,t)},this.eventonInviteClicked=function(t){this.setAnalyticsParams("event","GROUP_HOME","INVITE_SELECTED",null,t)},this.eventonUpgradeClicked=function(t){this.setAnalyticsParams("event","GROUP_HOME","UPGRADE_SELECTED",null,t)},this.eventonGifVideoClicked=function(t,e){this.setAnalyticsParams("event","GIF_VIDEO_TOGGLE",e,null,t)},this.eventonInvitePageLoaded=function(t){this.setAnalyticsParams("event","INVITE_PAGE","INVITE_PAGELOADED",null,t)},this.eventonStartClicked=function(t){this.setAnalyticsParams("event","INVITE_PAGE","START_CLICKED",null,t)},this.eventonInviteBackClicked=function(t){this.setAnalyticsParams("event","INVITE_PAGE","BACK_CLICKED",null,t)},this.eventonInviteScreenLaunched=function(t){this.setAnalyticsParams("event","GROUP_HOME","INVITE_SCREEN_SHOWN",null,t)},this.eventonInvitedUserFromLink=function(t){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","INVITE_USER_UX_LOADED",null,t)},this.eventonErrorReadingByteCode=function(t){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","ERROR_READING_BYTE_CODE",null,t)},this.eventonInvitedUserDirect=function(t){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","NORMAL_UX_LOADED",null,t)},this.eventonInvitedCheckMarkCalled=function(t){this.setAnalyticsParams("event","CUSTOMIZATION_CATEGORY","CHECK_MARK_REFFERER",null,t)},this.eventonGroupHomeLoadedFromRefer=function(t){this.setAnalyticsParams("event","GROUP_HOME","INVITE_REFERRER_SUCESS",null,t)},this.eventOnBuyCoinOptionClicked=function(t,e,n){this.setAnalyticsParams("event",n,"BUY_COIN_"+e,null,t)},this.eventOnBuyPackClicked=function(t,e){this.setAnalyticsParams("event",e,"BUY_PACK",null,t)},this.eventOnBuyOutfitClicked=function(t,e){this.setAnalyticsParams("event",e,"BUY_OUTFIT",null,t)},this.eventOnBuyChristmasOutfitClicked=function(t,e){this.setAnalyticsParams("event",e,"BUY_CHRISTMAS_OUTFIT",null,t)},this.eventOnBuyChristmasAllOutfitBannerClicked=function(t,e){this.setAnalyticsParams("event",e,"BUY_CHRISTMAS_ALL_OUTFIT",null,t)},this.eventOnBuyAllOutfitBannerClicked=function(t,e){this.setAnalyticsParams("event",e,"BUY_ALL_OUTFIT",null,t)},this.eventOnWatchedVedioClicked=function(t,e){this.setAnalyticsParams("event",e,"WATCH_VIDEO",null,t)},this.eventOnWatchedMiniClipClicked=function(t,e){this.setAnalyticsParams("event",e,"WATCH_MINI_CLIP",null,t)},this.eventOnBuyPrime=function(t,e){this.setAnalyticsParams("event",e,"BUY_PRIME",null,t)}}t.$inject=["$http","$q","Paths","Config","GlobalService"],angular.module("xpresso").service("AnalyticsService",t)}();
!function(){"use strict";function e(e,n){this.checkValue=function(e){return appInterface.checkValue(e)},this.dateComparison=function(e,n,t){var e=e.split(" "),n=n.split(" "),t=t.split(" "),r=e[0].split(""),a=n[0].split(""),s=t[0].split(""),i=parseInt([r[4],r[5],r[6],r[7]].join("")),p=parseInt([a[4],a[5],a[6],a[7]].join("")),o=parseInt([s[4],s[5],s[6],s[7]].join("")),c=parseInt([r[2],r[3]].join(""))-1,u=parseInt([a[2],a[3]].join(""))-1,l=parseInt([s[2],s[3]].join(""))-1,I=parseInt([r[0],r[1]].join("")),g=parseInt([a[0],a[1]].join("")),d=parseInt([s[0],s[1]].join("")),h=e[1].split(":"),v=n[1].split(":"),f=t[1].split(":"),m=parseInt(h[0]),j=parseInt(v[0]),A=parseInt(f[0]),_=parseInt(h[1]),w=parseInt(v[1]),K=parseInt(f[1]),B=parseInt(h[2]),C=parseInt(v[2]),F=parseInt(f[2]),O=new Date(i,c,I,m,_,B,0),S=new Date(p,u,g,j,w,C,0),t=new Date(o,l,d,A,K,F,0);return O>=S&&t>=O?!0:!1},this.backButtonImage=function(e){localStorage.getItem("language");return e==n.FACEBOOK?"app/app_resources/icons/ic_home.png":"/app/app_resources/icons/avatar_customization.png"},this.homeButtonImage=function(e){localStorage.getItem("language");return e==n.FACEBOOK?"app/app_resources/icons/ic_home.png":"app/app_resources/icons/home.png"},this.getAppVersionAndroid=function(){var e=localStorage.getItem("appversion");return e=e.replace("android:",""),e=e.replace(/\./g,""),parseInt(e)},this.isAndroidVersionLower=function(){var e=navigator.userAgent;if(/Android/.test(e)){var n=e.split("Android")[1].split(";")[0];n=parseFloat(n).toFixed(0);var t=parseInt(n);if(5>t)return!0}return!1},this.isKeyboard=function(){var n=0;return void 0!=e&&void 0!=e.isKeypad&&(n=e.isKeypad),n}}e.$inject=["$window","XConstants"],angular.module("xpresso").service("GlobalService",e)}();
!function(){"use strict";function e(e,t,n,a,r,o,i,l,c,s,u){function d(){var e=document.getElementById("design-container"),n="fixed";t.isiOS=!1,le.isiOSPlatform()&&(t.isiOS=!0,n="absolute",e.style.overflowX="hidden",e.style.overflowY="hidden",e.style.top="20px");try{e.style.position=n}catch(a){}}function m(){t.isReferrer=localStorage.getItem("isreferrer");var e=document.getElementsByClassName("invite-loader");e[0].style.display="none";var e=document.getElementsByClassName("design-container");if(DebugUtils.isavDesignDebugEnabled&&console.log("elements "+e),e[0].style.display="block",i.eventonInvitedUserDirect(K),t.isFromInviteRequest=localStorage.getItem("inviteLaunchGenderPage"),null==t.isFromInviteRequest&&(t.isFromInviteRequest=0),t.proceedText=s.SAVE_AND_PROCEED,0==t.isFromInviteRequest){t.title="Yes I'm ready";var e=document.getElementsByClassName("header");DebugUtils.isavDesignDebugEnabled&&console.log("elements "+e),e[0].style.display="block"}1!=t.isReferrer&&H(),d(),o.allColorsTable().then(function(e){t.colorMap=e;var n=g();h(n),l.checkValue(a.getByteCode())&&v()})["catch"](function(e){DebugUtils.isavDesignDebugEnabled()&&console.log("Error: Color Table Map")})}function v(){var e=new Date,t=e.getTime(),n=localStorage.getItem("installTime");l.checkValue(n)&&localStorage.setItem("installTime",t)}function g(){var e=a.getGender();return"undefined"==e?"male":a.getGender()}function f(e){var t=e.avatarId;return 1==t?"male":"female"}function h(e){var t="IN";l.checkValue(t)?o.getIPInfo().then(function(n){"IN"!=n&&"US"!=n&&"CN"!=n&&(n="others"),t=n,u.saveCountryName(n),b(e,t)})["catch"](function(n){t="others",b(e,t)}):("IN"!=t&&"US"!=t&&(t="others"),b(e,t))}function b(e,n){o.outfits(e,n).then(function(n){t.outfitBrand=n;var r=a.getOutfitBrand();l.checkValue(r)&&(r=0),I(0,r),C(e)})["catch"](function(e){DebugUtils.isavDesignDebugEnabled()&&console.log("Error: Could not load outfits for current Avatar")})}function I(e,n){void 0!=t.outfitBrand&&(a.setOutfitBrand(n),t.indexParent=n,t.avatarOutfits=t.outfitBrand[n].outfitList,t.currentOutfitIndex=e,t.currentOutfit=t.avatarOutfits[e])}function C(e){o.avatarConfig(e).then(function(e){t.avatarInfo=e,S(e),p(t.currentCustomizable),B(),y(t.currentCustomizable)})["catch"](function(e){DebugUtils.isavDesignDebugEnabled()&&console.log("Error AV Config: "+e)})}function S(){var e=[],n=0,r=0,o=t.avatarInfo.Feature.Customizable;if(void 0!=o&&o.length>0)for(var i=0;i<o.length;i++){var l=o[i];e.push(l),1==l.allowed&&(0!=i&&(r=i.toString(),ie[r]=n.toString()),n=r)}r=e.length;var c=t.avatarInfo.Style.Customizable;if(void 0!=c&&c.length>0)for(var i=0;i<c.length;i++){var l=c[i];e.push(l),1==l.allowed&&(r=(i+r).toString(),ie[r]=n.toString(),n=r)}var s={};s.name="outFit",s.or="0",s.allowed="1",e.push(s),r=(e.length-1).toString(),ie[r]=n.toString(),t.customizables=e,1!=a.getSwitch()?(t.currentIndex=0,Z=0):(t.colorSwatch=[],t.currentIndex=t.customizables.length-1,Z=t.customizables.length-1,document.getElementById("avdesign-item-container").style.height="40vh"),t.currentCustomizable=t.customizables[t.currentIndex]}function p(e){t.colorSwatch=[];var n=e.color_swatch;t.colorSwatch=t.colorMap[n]}function y(e){for(var n=e.name,a=t.avatar,r=a.customized_items,o=0;o<r.length;o++){var i=r[o],l=i.name;l==n&&z(i)}}function z(e){var n=e.customized_item,a=n.item_id;t.currentID=a}function w(e){for(var n=t.customizables,a=0;a<n.length;a++){var r=n[a];if(r.id==e)return r}return""}function A(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(a.id==t)return n}return 0}function _(e,n,a){for(var r=t.outfitBrand,o=0;o<r.length;o++)for(var i=r[o],l=i.outfitList,c=0;c<l.length;c++){var s=l[c],u=s.outfit_items;if(3==u.length){var d=u[0].item_name.toLowerCase(),m=u[1].item_name.toLowerCase(),v=u[2].item_name.toLowerCase();if(!(d!=e&&m!=e&&v!=e||d!=n&&m!=n&&v!=n||d!=a&&m!=a&&v!=a))return{parentIndex:o,childIndex:c}}}return{parentIndex:0,childIndex:0}}function k(n){var a=t.avatarInfo,r=T(a);t.avatar=r;for(var o="",l="",c="",s=n.elements,u=0;u<s.length;u++){var d=s[u],m=d.customizableId,v=w(m),g=d.customizableItemId,f=v.customizable_item,h=A(f,g),b=N(v,h);if(void 0!=v||""!=v){var C=v.name,S=b.customized_item;S.color=d.color,S.uicolor=d.color,"Bottom"===C?l=S.item_name.toLowerCase():"Top"===C?o=S.item_name.toLowerCase():"Shoe"===C?c=S.item_name.toLowerCase():F(b)}}var p=_(c,o,l);I(p.childIndex,p.parentIndex),P(t.currentOutfit),x(),t.showLoader="0",t.showOverlay="0",e.reload(),t.lastTabPressed=1,DebugUtils.isavDesignDebugEnabled&&console.log("customizedAvatarFromInternalFormat isReferrer"+t.isReferrer),1==t.isReferrer&&(i.eventonInvitedCheckMarkCalled(K),J.oncheckMarkClicked())}function E(e){for(var n=t.customizables,a=0;a<n.length;a++){var r=n[a];if(r.name===e)return r}return null}function D(){var e=q("MouthShapes");if(!e){var t=E("MouthShapes");if(t){var n=N(t,0);F(n)}}}function B(){if(void 0!=t.internalAVFormat)return void k(t.internalAVFormat);var e=t.avatarInfo;if(0==t.isFromInviteRequest){var n=X();if("-1"!=n){var a=u.getGender();if(a==n.gender){t.avatar=n;var r=t.avatar.outfit_index;void 0==r&&(r=0),t.avatar.outfit_index=r,D()}else O(e)}else O(e)}else O(e)}function T(e){var t={};return t.name=e.name,t.gender=e.gender,t.id=e.id,t.customized_items=[],t.outfit_index=0,t}function O(e){var n=T(e);t.avatar=n,P(t.currentOutfit),L(),x()}function x(){var e=t.avatar.customized_items;e.sort(function(e,t){var n=e.zindex,a=t.zindex;return a>n?-1:n>a?1:0})}function P(e){for(var n=e.outfit_items,r=0;r<n.length;r++){var o=n[r],i=a.customizableItemFromOutfitItem(o,t.avatar.name);F(i)}}function F(e){var n=a.addCustomizable(e,t.avatar,t.currentIndex,t.customizables.length-1,!0);z(n)}function V(e){var n=t.currentCustomizable;("Specs"==n.name||"Beard"==n.name||"Moustache"==n.name)&&(t.colorSwatch=[],document.getElementById("avdesign-item-container").style.height="40vh"),a.removeCustomizedItem(n,t.avatar),t.currentID=""}function L(){for(var e=t.customizables,n=0;n<e.length;n++){var a=e[n];if("1"==a.allowed&&("true"==a["default"]||"MouthShapes"==a.name)){var r=N(a,0);F(r)}}}function N(e,n){var r=e.customizable_item,o=r[n],i={};i.name=e.name,i.type="color",i.zindex=e.or,i.customizable_id=e.id;var l={};l.item_name=o.name,l.item_id=o.id,l.asset_map=o.as;var c=e.color_swatch,s=parseInt(e.defaultColor),u=t.colorMap[c];u[s];l.color=U(c,s),l.uicolor=l.color,i.customized_item=l;var d=t.avatar.name;return l.img_src=a.imageURL(o.as,d),i}function U(e,n){var a=t.colorMap[e],r=a[n];return r.c0}function R(e,t){var n=-1;if(void 0!=e&&void 0!=t){e=e.toLowerCase();var a=e.split(t);a.length>1&&(n=parseInt(a[1]))}return n}function M(e){e=e.toLowerCase();var n=e.split("-"),a=n[1],r=parseInt(a);if(!isNaN(r)){var o;0!=r&&(o=ie[r].toString());for(var i,l=0;l<t.customizables.length;l++)if(ie[l]==r.toString()){i=l;break}return o==Z.toString()||i==Z.toString()?!0:!1}}function G(e,n){var r=a.customizedItemForCategory(n.name,t.avatar);if(r){var o=r.customized_item;o.color=e,o.uicolor=e}}function q(e){for(var n=t.avatar.customized_items,a=0;a<n.length;a++)if(e==n[a].name)return!0;return!1}function Y(){var e=a.getByteCode();if(DebugUtils.isavDesignDebugEnabled&&console.log("storeCurrentGender bytecode is "+e),!l.checkValue(e)){var t=a.internalAvatarFormatForAVBytecode(e),n=f(t);DebugUtils.isavDesignDebugEnabled&&console.log("previous gender is "+n),u.saveGender(n)}}function X(){var e=a.getAvatar();if(void 0!=e){try{X=JSON.parse(e)}catch(t){return DebugUtils.isavDesignDebugEnabled()&&console.trace(),"-1"}return X}return"-1"}function $(){setTimeout(function(){"complete"===document.readyState&&(t.showLoader="0",t.showOverlay="0",e.reload())},0)}function H(){t.showLoader="1",t.showOverlay="1"}t.language="en";var J=this;this.gen=u.getGender("gender");var K=localStorage.getItem("UUID"),j=localStorage.getItem("App"),Q=localStorage.getItem("FirstTime"),W=u.getGender();t.app=j,t.tappedCancel=1;var Z,ee=7;t.lastTabPressed=0;var te,ne="Head-0",ae="outFit-11",re=null,oe=0;t.isFromInviteRequest=0,t.isReferrer=0,this.backgroundSource="/app/app_resources/icons/boy.png",DebugUtils.isavDesignDebugEnabled&&console.log("Gender :: "+this.gen+" UUID :: "+K+" AppName :: "+j);var ie={};t.moveToLeft=!1,t.swipeActive=!1;var le=bridgeInterFace.getInstance();i.eventOnCustomizationLaunched(K),m(),t.genderImage=u.getGender("gender"),t.isFemale=!1,"female"===t.genderImage&&(J.backgroundSource="/app/app_resources/icons/girl.png",t.isFemale=!0),J.onCustomizableClicked=function(n,a){var r;if(l.checkValue(a)){if(r=event.target.id,0==t.lastTabPressed)var o=M(r);t.lastTabPressed=0,o?t.swipeActive=!0:t.swipeActive=!1}else r=a;if(void 0!=r){r=r.toLowerCase();var c=r.split("-");if(void 0!=c&&c.length>1){var s=c[1];Z=s;var u=parseInt(s),d=t.customizables[u].name.toLowerCase(),m=t.customizables[u];i.eventCustomizableClicked(K,d),t.currentID="",y(m),t.currentCustomizable=m,t.currentIndex=u,t.tappedCancel=1,u==t.customizables.length-1&&(t.colorSwatch=[]),setTimeout(function(){if(u==t.customizables.length-1)document.getElementById("avdesign-item-container").style.height="40vh";else{p(m),te=t.colorSwatch;var n=t.currentCustomizable;if("Specs"==n.name||"Beard"==n.name||"Moustache"==n.name){var a=q(n.name);a||(t.colorSwatch=[],document.getElementById("avdesign-item-container").style.height="40vh")}else document.getElementById("avdesign-item-container").style.height="32vh"}e.reload()},10)}}},J.genderSelection=function(){le.launch_gender()},J.cancelButtonClicked=function(){t.tappedCancel=0;var e=t.currentCustomizable;("Specs"==e.name||"Beard"==e.name||"Moustache"==e.name)&&V(t.currentCustomizable),i.eventOnCancelButtonSelected(K)},J.onCustomizedItemClicked=function(e){t.tappedCancel=1;var n=t.currentCustomizable;("Specs"==n.name||"Beard"==n.name||"Moustache"==n.name)&&(t.colorSwatch=te,document.getElementById("avdesign-item-container").style.height="32vh");var a=event.target.id,r=R(a,"-");if(void 0!=r&&!isNaN(r)){var o=N(t.currentCustomizable,r);i.eventonCustomizableItemClicked(K,o.customized_item.item_name),F(o)}},J.returnHome=function(){j==r.FACEBOOK?le.launchFb():l.checkValue(Q)?(i.eventOnGenderButtonSelected(K,this.gen),u.saveCurrentState("gender"),u.savePreviousState("avDesign"),e.go("gender",appInterface.getAppUrlParams())):0==t.isFromInviteRequest||(u.saveCurrentState("gender"),u.savePreviousState("avDesign"),e.go("gender"))},J.onOutfitItemClicked=function(e,n){var a=event.target.id,r=R(a,"-");void 0==r||isNaN(r)||(I(r,n),P(t.currentOutfit),i.eventonOutfitSelected(K,t.currentOutfit.name),t.avatar.outfit_index=r)},J.onColorItemClicked=function(e){var n=event.target.id,a=R(n,"-");if(void 0!=a&&!isNaN(a)){var r=t.currentCustomizable,o=U(r.color_swatch,a);i.eventColorChosen(K,o),G(o,r)}},J.lastScrollTab=function(){J.oncheckMarkClicked()},J.oncheckMarkClicked=function(){if(void 0!=t.avatar){var e=a.getInternalAvatarFormat(t.avatar),n=a.serilazedBase64StringFromInternalFormat(e);t.avByteCode=n,a.saveByteCode(t.avByteCode);var r=JSON.stringify(t.avatar);a.saveAvatar(r),window.parent.postMessage({type:"avc",bytecode:t.avByteCode},"*")}else le.loadOnError()},J.onBackClicked=function(t){Y(),u.saveCurrentState("gender"),u.savePreviousState("avDesign"),e.go("gender")},J.onSwipeLeftAction=function(){t.moveToLeft=!1,t.swipeActive=!0,e.reload(),"male"==W&&document.getElementById(ae).scrollIntoView({block:"end",behavior:"smooth"});for(var n=t.currentIndex,a=0,r=0;r<t.customizables.length;r++)if(ie[r]==n.toString()){a=r;break}if(1!=t.lastTabPressed||l.checkValue(Q))if(t.currentIndex<t.customizables.length-1){var o="dummyString-"+a;J.onCustomizableClicked(null,o)}else J.lastScrollTab();else{"male"==W&&document.getElementById(ne).scrollIntoView({block:"end",behavior:"smooth"});var o="dummyString-"+0..toString();t.lastTabPressed=0,J.onCustomizableClicked(null,o)}},J.onSwipeRightAction=function(){if(t.moveToLeft=!0,t.swipeActive=!0,document.getElementById(ne).scrollIntoView({block:"end",behavior:"smooth"}),1==t.lastTabPressed){"male"==W&&document.getElementById(ae).scrollIntoView({block:"end",behavior:"smooth"});var e="dummyString-"+(t.customizables.length-1).toString();t.lastTabPressed=0,J.onCustomizableClicked(null,e)}else{var n=t.currentIndex,a=ie[n],e="dummyString-"+a;0!=t.currentIndex?J.onCustomizableClicked(null,e):l.checkValue(Q)||J.lastScrollTab()}},window.onload=function(){},t.checkPopup=function(){1==oe&&null!=re&&(c.close(re),le.getPopupState("0"))},t.getNumber=function(e){try{return new Array(e)}catch(t){return new Array(0)}},t.ctrlFn=function(e){ee--;var t=localStorage.getItem("FirstTime");0==ee&&($(),"male"==W&&1==a.getSwitch()?document.getElementById(ae).scrollIntoView({block:"end",behavior:"smooth"}):0==a.getSwitch()&&(document.getElementById(ne).scrollIntoView({block:"end",behavior:"smooth"}),a.setSwitch(0))),0==ee&&l.checkValue(t)&&i.eventOnAvatarLaunched(K)},t.backPressedAction=function(){j==r.FACEBOOK?le.closeApp(0):l.checkValue(Q)?firstTimeUserAction():normalAction()},J.getYesImReadyString=function(){return s.YES_IM_READY},J.getCreateInviteString=function(){return s.CREATE_INVITE},J.getExitAvatarText1String=function(){return s.POPUP_EXIT_AVATAR1},J.getExitAvatarText2String=function(){return s.POPUP_EXIT_AVATAR2},J.getExitAvatarYesString=function(){return s.POPUP_EXIT_AVATAR_YES},J.getExitAvatarNoString=function(){return s.POPUP_EXIT_AVATAR_NO}}e.$inject=["$state","$scope","$window","AvatarDesignService","XConstants","HTTPClient","AnalyticsService","GlobalService","ngDialog","LocalStorageService","GenderService"],angular.module("xpresso").controller("AVDesignController",e)}();
!function(){"use strict";function e(e,t,a,r,n,o,i,s){function m(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function g(e){var t,a=atob(e),r=a.length,n=new Uint8Array(r);for(t=0;r>t;++t)n[t]=a.charCodeAt(t);return n}function c(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function l(e,t,a){return c(e)+c(t)+c(a)}function u(e,t,a,r,n,o){var i=e.customized_items;console.log("avatar gender "+e.gender+" isUserImage "+t),A=i.length;for(var s=0;s<i.length;s++){var m=i[s],g=new Object;"Shoe"!=m.name&&"Top"!=m.name?(g.source=m.customized_item.img_src,g.fill_color=m.customized_item.uicolor,g.name=m.name,U.push(g),d(g,t,a,r,n,o)):A--}}function d(e,t,a,r,n,o){var i=new Image;i.onload=function(){A--,0==A&&v(t,a,r,n,o)},e.image_ref=i,i.src=e.source}function v(e,t,a,r,n){var o=document.createElement("canvas");o.width=a,o.height=r;var i=o.getContext("2d");w=[];for(var s=(U.length,0);s<U.length;s++){var m=U[s],g=document.createElement("canvas");w.push(g),g.width=a,g.height=r,p(m,g)}C=w.length,y=0;var c=w[y];h(o,i,c,e,t,n)}function h(e,t,a,r,n,o){f(t,a,function(a){if(1>=C||y>w.length-1)I(e,r,n,o);else{C--,y++;var i=w[y];console.log("start=",y),h(e,t,i,r,n,o)}})}function f(e,t,a){var r=new Image;r.src=t.toDataURL("image/png"),r.onload=function(){e.drawImage(r,0,0,r.width,r.height),a()}}function I(e,t,a,r){var n=e.toDataURL("image/png");r(n),console.log("isUserImage "+t),t||a?t&&localStorage.setItem("user_full_image",n):localStorage.setItem("friend_image",n),console.log("captureFinalSnapshot isInviteAvatar"+a),a&&localStorage.setItem("user_invite_image",n)}function p(e,t){var a=e.image_ref,r=e.name,n=e.fill_color;"0"===n?_(t,a):"Eye"===r||"BroShapes"===r?z("0000FF",t,a,n):b(t,a,n)}function m(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function _(e,t){var a=e.getContext("2d"),r=e.width,n=e.height;a.drawImage(t,0,0,r,n)}function b(e,t,a){var r=m(a),n=r.r,o=r.g,i=r.b;S(t,e,n,o,i)}function z(e,t,a,r){var n=m(e),o=n.r,i=n.g,s=(n.b,m(r)),g=s.r,c=s.g,l=s.b,u=t.width,d=t.height,v=t.getContext("2d");v.clearRect(0,0,u,d),v.drawImage(a,0,0,u,d);for(var h=v.getImageData(0,0,u,d),f=0;f<h.data.length;f+=4)h.data[f]==o&&h.data[f+1]==i&&h.data[f+2]>1&&(h.data[f]=g,h.data[f+1]=c,h.data[f+2]=l);v.putImageData(h,0,0)}function S(e,t,a,r,n){var o=t.width,i=t.height,s=t.getContext("2d");s.clearRect(0,0,o,i),s.drawImage(e,0,0,o,i);for(var m=s.getImageData(0,0,o,i),g=0;g<m.data.length;g+=4)0!=m.data[g+3]&&(m.data[g]=2*a*m.data[g]/255,m.data[g+1]=2*m.data[g+1]*r/255,m.data[g+2]=2*m.data[g+2]*n/255);s.putImageData(m,0,0)}bridgeInterFace.getInstance();this.serilazedBase64StringFromInternalFormat=function(e){var t=e.elements.length;if(0==t)return"";var a=2*t+3*e.numberofcolorset+1*e.numberofpatternset,r=[];r[0]=64|t,r[1]=parseInt(a)>>8,r[2]=parseInt(a),r[3]=parseInt(e.avatarId);for(var n=4,o=0;t>o;o++){var i=e.elements[o];if(void 0!=i.isprintorpatternset?void 0!=i.colorset?r[n++]=96|parseInt(i.customizableId):r[n++]=64|parseInt(i.customizableId):void 0!=i.colorset&&(r[n++]=32|parseInt(i.customizableId)),r[n++]=0|parseInt(i.customizableItemId),void 0!=i.colorset){var s=m(i.color),g=s.r,c=s.g,l=s.b;r[n++]=parseInt(g),r[n++]=parseInt(c),r[n++]=parseInt(l)}void 0!=i.isprintorpatternset&&(r[n++]=parseInt(i.printorpatternid))}var u=btoa(String.fromCharCode.apply(null,new Uint8Array(r)));return u},this.getInternalAvatarFormat=function(e){var t=e,a=t.customized_items;if(void 0==a||0==a.length)return"";var r={};r.avatarId=t.id;for(var n=0,o=0,i=[],s=0;s<a.length;s++){var m=a[s],g=m.customized_item,c={};c.customizableId=m.customizable_id,c.customizableItemId=g.item_id;var l=m.type;"print"!=l?(c.color=g.color,c.colorset="1",c.printorpatternid=g.asset_id,++n,"pattern"==l&&(c.printorpatternid=g.asset_id,++o,c.isprintorpatternset="1")):(++o,c.isprintorpatternset="1",c.printorpatternid=g.asset_id),i.push(c)}return r.numberofpatternset=o,r.numberofcolorset=n,r.elements=i,r},this.getByteCode=function(){return localStorage.getItem("bytecode")},this.saveByteCode=function(e){localStorage.setItem("bytecode",e)},this.resetByteCode=function(){localStorage.removeItem("bytecode")},this.getAvatarImgData=function(e,t,a,r,n,o){var i=document.createElement("canvas");i.width=e,i.height=t;for(var s=i.getContext("2d"),m=0;m<a.length;m++){var g="canvas-"+m,c=document.getElementById(g),l=(c.children[0],new Image);l.src=c.children[0].toDataURL("image/png"),s.drawImage(l,0,0,l.width,l.height)}i.toDataURL("image/png")},this.saveUserAvatarImage=function(e,t,a,r,n,o){var i=document.createElement("canvas");i.width=e,i.height=t;for(var s=i.getContext("2d"),m=0;m<a.length;m++){var g="canvas-"+m,c=document.getElementById(g),l=(c.children[0],new Image);l.src=c.children[0].toDataURL("image/png"),s.drawImage(l,0,0,l.width,l.height)}var u=i.toDataURL("image/png");r&&!o?(console.log("saveUserAvatarImage user half image "),this.setUserAvatarImage(u,n)):r||(console.log("saveUserAvatarImage friend image "),this.setFriendAvatarImage(u)),o&&(console.log("saveUserAvatarImage user full image "),this.setUserFullAvatarImage(u))},this.setUserFullAvatarImage=function(e){localStorage.setItem("user_full_image",e)},this.getUserFullAvatarImage=function(e){return localStorage.getItem("user_full_image")},this.setFriendAvatarImage=function(e){localStorage.setItem("friend_image",e)},this.getFriendAvatarImage=function(e){return localStorage.getItem("friend_image")},this.customizableItemFromOutfitItem=function(e,t){var a={};a.name=e.name,a.type=e.type,a.customizable_id=e.customizable_id,a.zindex=e.or;var r={};r.item_name=e.item_name,r.item_id=e.item_id,r.asset_map=e.asset_map,r.asset_id=e.asset_id,r.color=e.color,r.uicolor="0";var t=t;return r.img_src=this.imageURL(e.asset_map,t),a.customized_item=r,a},this.customizedItemForCategory=function(e,t){for(var a,r=t.customized_items,n=0;n<r.length;n++){var o=r[n];if(o.name==e){a=o;break}}return a},this.removeCustomizedItem=function(e,t){for(var a=t.customized_items,r=[],n=a.length,o=n-1;o>=0;o--){var i=a[o];if(i.name==e.name){t.customized_items.pop()}else{var s=t.customized_items.pop();r.push(s)}}n=r.length;for(var o=0;n>o;o++){var s=r.pop();t.customized_items.push(s)}},this.imageURL=function(e,t){var a="./app/app_resources/resources/av/",r=a+t+"/as_map/"+e;return r},this.getCustomizableItemFromCustomizable=function(e,t){var a={};a.name=e.name,a.type=e.type,a.zindex=e.or,a.customizable_id=e.customizable_id;var r={};r.item_name=e.item_name,r.item_id=e.item_id,r.asset_map=e.asset_map,r.color=e.color,r.uicolor=r.color,a.customized_item=r,a.asset_id=e.asset_id,r.asset_id=e.asset_id;var n=t.name;return r.img_src=this.imageURL(e.asset_map,n),a},this.addCustomizable=function(e,t,a,r,n){var o=this.customizedItemForCategory(e.name,t);if(o){var i=o.customized_item,s=e.customized_item;if(1==n&&i.item_id==s.item_id&&("Specs"==e.name||"Beard"==e.name||"Moustache"==e.name))return this.removeCustomizedItem(e,t),o;i.asset_map=s.asset_map,i.item_id=s.item_id,i.item_name=s.item_name,i.img_src=s.img_src,a==r&&(i.color=s.color,o.type=e.type),void 0!=s.asset_id&&(i.asset_id=s.asset_id)}else o=e,t.customized_items.push(e);return o},this.setUserAvatarImage=function(e,t){t?localStorage.setItem("user_image",e):localStorage.setItem("user_image",e)},this.getUserAvatarImageInLocalStorage=function(e){return localStorage.getItem("user_image")},this.saveAvatar=function(e){localStorage.setItem("avatar",e)},this.getAvatar=function(){return localStorage.getItem("avatar")},this.setSwitch=function(e){localStorage.setItem("toggle",e)},this.getSwitch=function(){return localStorage.getItem("toggle")},this.setOutfitBrand=function(e){localStorage.setItem("brandIndex",e)},this.getOutfitBrand=function(){return localStorage.getItem("brandIndex")},this.internalAvatarFormatForAVBytecode=function(e){if(void 0==e)return null;var t=g(e),a=(224&t[0])>>5,r=31&t[0],n=((7&t[1])<<8|255&t[2],255&t[3]),o={};o.avatarId=n;for(var i=[],s=4,m=0,c=0,u=0;r>u;u++){var d=(32&t[s])>>5,v=(64&t[s])>>6,h=31&t[s++],f=0;f=1==a?31&t[s++]:255&t[s++];var I={};I.customizableId=h,I.customizableItemId=f;var p,_,b,z=0;if(1==d){++m,p=255&t[s++],_=255&t[s++],b=255&t[s++];var S=l(p,_,b);I.colorset="1",I.color=S}1==v&&(++c,z=255&t[s++],I.isprintorpatternset="1",I.printorpatternid=z),i.push(I)}return o.numberofpatternset=c,o.numberofcolorset=m,o.elements=i,o};var A=0,U=[];this.exportAvatarToBitMap=function(e,t,a,r,n,o){A=0,U=[],u(e,t,a,r,n,o)},this.getGender=function(){return localStorage.getItem("gender")};var w=[],y=0,C=0;this.getLanguage=function(){var e=localStorage.getItem("language"),t=n.getCountryName();if(DebugUtils.isGroupHomeDebugEnabled()&&console.log("service getLanguage stored "+e+" countryName "+t),i.checkValue(e)&&!i.checkValue(t)){var a=o.getVersionBasedOnCountry(t,"LANGUAGE",n.getGender());return DebugUtils.isGroupHomeDebugEnabled()&&console.log("service getLanguage inside "+a),i.checkValue(a)&&(a=s.ENGLISH),DebugUtils.isGroupHomeDebugEnabled()&&console.log("service getLanguage final "+a),localStorage.setItem("language",a),a}return e},this.getLanguageForApi=function(){var e=localStorage.getItem("language");return DebugUtils.isGroupHomeDebugEnabled()&&console.log("service getLanguageForApi stored "+e),i.checkValue(e)?s.ENGLISH:e}}e.$inject=["$http","$q","Paths","Config","GenderService","HTTPClient","GlobalService","XConstants"],angular.module("xpresso").service("AvatarDesignService",e)}();
angular.module("xpresso").directive("avatarcanvas",function(){function a(a){var e=window.screen.width/2,t=window.devicePixelRatio;t>=2.5&&(e*=t),e=e>587?587:e;var n=1.53*e;a.width=e,a.height=n}function e(a){var e=a.getContext("2d");e.clearRect(0,0,a.width,a.height)}function t(a){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function n(a,e){var t=a.getContext("2d"),n=a.width,r=a.height;t.drawImage(e,0,0,n,r)}function r(a,e,n){var r=t(n),i=r.r,d=r.g,c=r.b;o(e,a,i,d,c)}function i(a,e,n,r){var i=.33,o=t(a),d=o.r,c=o.g,l=(o.b,t(r)),g=l.r/255,f=l.g/255,m=l.b/255,h=e.width,s=e.height,v=e.getContext("2d");v.clearRect(0,0,h,s),v.drawImage(n,0,0,h,s);for(var u=v.getImageData(0,0,h,s),p=0;p<u.data.length;p+=4)if(u.data[p]==d&&u.data[p+1]==c&&u.data[p+2]>1){var w=u.data[p],I=u.data[p+1],R=u.data[p+2],C=u.data[p+3],b=(R/(w+I+R)).toFixed(2),D=0;b>.33&&(D=(b-i)/(1-i));var x=(1-D)*w+D*(2*R)*g,F=(1-D)*I+D*(2*R)*f,S=(1-D)*R+D*(2*R)*m;u.data[p]=x,u.data[p+1]=F,u.data[p+2]=S,u.data[p+3]=C}v.putImageData(u,0,0)}function o(a,e,t,n,r){var i=e.width,o=e.height,d=e.getContext("2d");d.clearRect(0,0,i,o),d.drawImage(a,0,0,i,o);for(var c=d.getImageData(0,0,i,o),l=0;l<c.data.length;l+=4)0!=c.data[l+3]&&(c.data[l]=2*t*c.data[l]/255,c.data[l+1]=2*c.data[l+1]*n/255,c.data[l+2]=2*c.data[l+2]*r/255);d.putImageData(c,0,0)}return{restrict:"EA",replace:!0,template:'<div>        <canvas width="587" height="900"  style="display: none;"></canvas>        <img class="canvas-image">        </div>',scope:{customizable:"@",source:"@",uicolor:"@",fromDirectiveFn:"=method"},link:function(t,o,d){var c=o[0].children[0],l=o[0].children[1];d.$observe("source",function(o){if(o){var d=new Image;d.onload=function(){t.fromDirectiveFn(),e(c),appInterface.Mobile().iOS()||a(c),"0"==t.fillColor?(n(c,d),l.src=c.toDataURL("image/png")):("Eye"==t.name||"BroShapes"==t.name||"MouthShapes"==t.name?i("0000FF",c,d,t.fillColor):r(c,d,t.fillColor),l.src=c.toDataURL("image/png")),t.imageReference=d},d.src=o}}),d.$observe("uicolor",function(a){t.fillColor=a,void 0!=t.imageReference&&(e(c),"Eye"==t.name||"BroShapes"==t.name||"MouthShapes"==t.name?i("0000FF",c,t.imageReference,t.fillColor):r(c,t.imageReference,t.fillColor),l.src=c.toDataURL("image/png"))}),d.$observe("name",function(a){t.name=a})}}});
!function(){"use strict";function e(e,n,a,t,r,o,c,g,u){function l(){i=localStorage.getItem("App"),v.inviteLaunchGenderPage=localStorage.getItem("inviteLaunchGenderPage"),n.language=t.getLanguage(),u.getString(),c.checkValue(n.language)&&(n.language="en"),n.yuko2="app/app_resources/language/"+n.language+"/resources/yuko2.jpg",n.cody2="app/app_resources/language/"+n.language+"/resources/cody2.jpg";var e=a.getCountryName();c.checkValue(e)&&g.getIPInfo(e).then(function(e){"IN"!=e&&"US"!=e&&"CN"!=e&&(e="others"),a.saveCountryName(e)})["catch"](function(n){e="others",a.saveCountryName(e)}),"IN"!=e&&"US"!=e&&"CN"!=e&&(e="others"),a.saveCountryName(e)}function s(n){a.saveGender(n),o.eventonGenderPageClosed(UUID),a.saveCurrentState("avDesign"),a.savePreviousState("gender"),t.setSwitch(0),e.go("avDesign",appInterface.getAppUrlParams())}var i,v=this;o.eventonGenderPageOpened(UUID),l(),v.onGirlClicked=function(){o.eventonGenderSelectedGenderPage(UUID,"female"),s("female")},v.onGuyClicked=function(){o.eventonGenderSelectedGenderPage(UUID,"male"),s("male")}}e.$inject=["$state","$scope","GenderService","AvatarDesignService","XConstants","AnalyticsService","GlobalService","HTTPClient","LocalStorageService"],angular.module("xpresso").controller("GenderController",e)}();
!function(){"use strict";function t(t,n){this.getGender=function(t){return localStorage.getItem("gender")},this.saveGender=function(t){localStorage.setItem("gender",t)},this.getAuthToken=function(){return e.get_token_async()},this.getAuthTokenFromLocalStorage=function(){return localStorage.getItem("OAuthToken")},this.setLaunchedApp=function(t){return localStorage.setItem("App",t)},this.getLaunchedApp=function(){return localStorage.getItem("App")},this.getCountryName=function(){return localStorage.getItem("Locale")},this.saveCountryName=function(t){localStorage.setItem("Locale",t)},this.savePreviousState=function(t){localStorage.setItem("prevState",t)},this.getPreviousState=function(){return localStorage.getItem("prevState")},this.saveCurrentState=function(t){localStorage.setItem("state",t)},this.getCurrentState=function(){return localStorage.getItem("state")},this.saveCountryName=function(t){localStorage.setItem("Locale",t)},this.getCountryName=function(){return localStorage.getItem("Locale")},this.isFBInFocus=function(){var t=!1;return this.getLaunchedApp()==n.FACEBOOK&&(t=!0),t}}t.$inject=["$http","XConstants"],angular.module("xpresso").service("GenderService",t);var e=bridgeInterFace.getInstance()}();